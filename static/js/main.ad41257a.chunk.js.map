{"version":3,"sources":["../lib/react-datasheet/lib/index.js","../lib/react-datasheet/lib/DataSheet.js","../lib/react-datasheet/lib/DataCell.js","constants/action-types.js","Helper/index.js","constants/tables.js","actions/index.js","Table/ColumnMenu.js","Table/TableMenu.js","constants/paths.js","DatasheetTable/drag-drop.js","SimpleDb.js","contexts.js","DatasheetTable/SheetRenderer.js","DatasheetTable/DatasheetTable.js","Image.js","Link/index.js","TableLink.js","Command.js","DatasheetTable/DataEditor.js","DatasheetTable/index.js","Table/index.js","menus/ScreenMenu.js","lib/ByPass/index.js","Selection.js","Draggable.js","Resizable.js","TableAutocomplete.js","helpers/index.js","Preview.js","Screen.js","router.js","StatusBar.js","SearchBar.js","menus/PreviewMenu.js","FAB.js","Tooltip.js","App.js","ErrorBoundary.js","serviceWorker.js","reducers/index.js","store/index.js","index.js","MouseController.js","../lib/react-datasheet/lib/CellShape.js","../lib/react-datasheet/lib/Cell.js","../lib/react-datasheet/lib/DataEditor.js","../lib/react-datasheet/lib/ValueViewer.js","../lib/react-datasheet/lib/Sheet.js","../lib/react-datasheet/lib/Row.js","../lib/react-datasheet/lib/keys.js","../lib/react-datasheet/lib/renderHelpers.js"],"names":["Object","defineProperty","exports","value","renderData","renderValue","ValueViewer","DataEditor","Cell","Row","Sheet","undefined","_DataSheet2","_interopRequireDefault","__webpack_require__","_Sheet2","_Row2","_Cell2","_DataEditor2","_ValueViewer2","_renderHelpers","obj","__esModule","default","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","_propTypes2","_DataCell2","_keys","isEmpty","keys","range","start","end","array","inc","push","unshift","defaultParsePaste","str","split","map","row","DataSheet","_PureComponent","instance","TypeError","_classCallCheck","this","_this","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","onMouseDown","bind","onMouseUp","onMouseOver","onDoubleClick","onContextMenu","handleNavigate","handleKey","handleCut","handleCopy","handlePaste","pageClick","onChange","onRevert","isSelected","isEditing","isClearing","handleComponentKey","handleKeyboardCellMovement","defaultState","selecting","forceEdit","editing","clear","state","removeAllListeners","subClass","superClass","create","constructor","setPrototypeOf","_inherits","PureComponent","document","removeEventListener","isSelectionControlled","_ref","selected","rest","indexOf","_objectWithoutProperties","_props","onSelect","setState","e","dgDom","contains","preventDefault","_getState","getState","clearSelectedCells","_props2","dataRenderer","valueRenderer","data","_getState2","text","j","cell","join","clipboardData","setData","_getState3","Math","min","max","parse","parsePaste","changes","pasteData","getData","_props3","onCellsChanged","onPaste","additions","forEach","readOnly","col","rowData","pastedData","_setState","commit","console","log","_getState4","currentCell","hasComponent","component","keyCode","which","TAB_KEY","shiftKey","RIGHT_KEY","LEFT_KEY","UP_KEY","DOWN_KEY","ENTER_KEY","isPropagationStopped","_getState5","noCellsSelected","ctrlKeyPressed","ctrlKey","metaKey","deleteKeysPressed","DELETE_KEY","BACKSPACE_KEY","enterKeyPressed","numbersPressed","lettersPressed","latin1Supplement","numPadKeysPressed","equationKeysPressed","_this2","_props4","cells","getSelectedCells","filter","setTimeout","_ref2","offsets","jumpRow","_this3","newLocation","updateLocation","_this4","ESCAPE_KEY","includes","offset","forceComponent","func","focus","evt","addEventListener","_props5","prevProps","prevState","_state","prevEnd","_getState7","posX","negX","posY","negY","_this5","_props6","SheetRenderer","sheetRenderer","RowRenderer","rowRenderer","cellRenderer","dataEditor","valueViewer","attributesRenderer","className","overflow","keyFn","createElement","ref","r","tabIndex","onKeyDown","a","onNavigate","onKey","clearing","propTypes","isRequired","string","oneOf","shape","number","defaultProps","_CellShape2","initialData","initialValue","widthStyle","width","DataCell","handleChange","handleCommit","handleRevert","handleMouseDown","handleMouseOver","handleContextMenu","handleDoubleClick","updated","reverting","committing","nextProps","timeout","clearTimeout","disableEvents","eatKeys","Editor","onCommit","Viewer","_props7","CellRenderer","onKeyUp","content","renderComponent","renderEditor","renderViewer","style","bool","TOGGLE_EDIT_MODE","NEW_TABLE","DEFS_LOADED","DELETE_TABLE","DELETE_COLUMN","UPDATE_DEF","UPDATE_DEFS","CACHE","LIST","SET","NEW","DEL","PUSH","nextColumnName","def","cols","String","fromCharCode","Helper","defs","defsName","reduce","acc","k","name","TABLES","DEFS","PREVIEW","EMPTY_DEF","backgroundColor","showLineNumbers","layout","newTable","db","theName","theId","callback","nextTableName","id","uuidv1","idCol","objectSpread","set","TABLE","type","ACTION","addColumn","theDef","layoutNb","oldCols","concat","toConsumableArray","withColumn","deleteColumn","columnId","_","c","withoutColumn","setDb","path","val","Array","addPreview","tableId","height","x","y","ColumnMenu","onTypeChange","react_default","lib","onClick","label","React","Component","connect","dispatch","TableMenu","addColumnUnder","_ref3","UI_LOADING","ROUTE","colDragSource","DragSource","beginDrag","columnIndex","_monitor","connectDragSource","dragSource","colDropTarget","DropTarget","canDrop","monitor","item","getItem","drop","didDrop","fromIndex","toIndex","onColumnDrop","connectDropTarget","dropTarget","isOver","rowIndex","connectDragPreview","dragPreview","onRowDrop","_path","castArray","SimpleDb","stash","rawPath","file","get","axios","then","response","catch","error","finally","put","headers","Content-Type","unset","delete","update","updates","MOUSE_ACTION","MOUSE_ACTION_DRAG","StoreContext","createContext","StoreProvider","Provider","store","children","avec","rawPaths","Comp","_useState","useState","_useState2","slicedToArray","subProps","setSubProps","paths","logSetSubProps","blah","Consumer","storeProps","subscribe","load","dispatchDelete","dispatchUpdate","withDispatch","ColumnNameBase","onColumnNameChange","columnName","render","riek_lib","change","propName","validate","isString","ColumnName","Header","_this$props","_this$props2","hideColumnNames","isField","index","from","to","splice","apply","columnDropped","MenuSheetRenderer","Fragment","DatasheetTable_SheetRenderer","hideLineNumbers","columns","objectWithoutProperties","attributes","slice","src_Table","hideTableName","Image","classCallCheck","possibleConstructorReturn","componentDidMount","infoPath","thisComponent","assertThisInitialized","snapshot","downloadUrl","onFilesChange","files","onFilesError","code","message","src","alt","dist_default","onError","accepts","maxFiles","maxFileSize","minFileSize","clickable","preview","url","Link","RegExp","test","href","PATH","HiddenTable","hidden","setHidden","src_Link","TableLink","defId","find","TableLink_HiddenTable","window","PrintABC","renderMidi","ABCJS","renderAbc","div","divMidi","el","abcLines","header","lines","abcLine","line","Command_PrintABC","playAbcLines","abc","table","src_TableLink","addDotCom","$","address","_window$context","context","addRelative","susRelative","isNaN","parseInt","colId","meteo","ville","lang","title","allowtransparency","frameBorder","validURL","makeAbsoluteURL","img","image","src_Image","figure","center","textAlign","fontWeight","fontSize","subtitle","marginLeft","textDecoration","underline","bold","lineThrough","favicon","site","origin","bookmark","link","COMMANDS","desc","args","tex","help","arg","textAreaKeyDown","renderList","renderTextArea","_input","input","stopPropagation","DatasheetTable","renderSheet","DatasheetTable_MenuSheetRenderer","generateGrid","colIds","nb","mapColIdsToValues","emptyLine","fill","grid","l","column","valueFromCell","colName","paddingLeft","paddingRight","result","eval","toString","reload","DatasheetTable_CellRenderer","DataEditor_DataEditor","handleSelect","sel","selection","keyDown","_this$state$selection","startI","endI","onDeleteLines","react_datasheet_lib_default","Table","tables","d","dataCol","mTable","nTable","renderDatasheetTable","rows","src_DatasheetTable","onTitleChange","onIconChange","icon","ScreenMenu","newLink","toggleEditMode","ByPass","if","Draggable","isDragging","setIsDragging","_useState3","_useState4","offsetX","setOffsetX","_useState5","_useState6","offsetY","setOffsetY","onMouseMove","react_draggable","onStop","deltaX","deltaY","handle","onStart","disabled","Resizable","deltaH","TableAutocomplete","setCancelled","Autocomplete_default","getItemValue","items","values","mapValues","renderItem","isHighlighted","background","open","shouldItemRender","TemporaryTable","src_TableAutocomplete","setConfirmed","LocatedPreview","position","maxHeight","left","top","xyToBox","x0","y0","x1","y1","selectionIsOutside","box","clickIsOutside","clientX","clientY","PreviewSelection","ids","previews","p","x_c","y_c","tempPreview","s","pageX","pageY","onCopy","selectionToCopy","cpy","t","model","oldDef","previewId","newP","editMode","outline","src_Draggable","src_Resizable","Preview_LocatedPreview","Preview_TemporaryTable","tableName","attrs","genDef","connectedPreviewSelection","deletePath","MapInteractionCSS","lastX","setLastX","lastY","setLastY","lastScale","setLastScale","react_map_interaction","translation","scale","transform","touchAction","msTouchAction","cursor","WebkitUserSelect","MozUserSelect","msUserSelect","transformOrigin","LinkScreen","mapDisabled","lib_ByPass","Screen_MapInteractionCSS","showControls","menus_ScreenMenu","ui","matchURI","uri","match","toRegex","exec","params","router","resolve","routes","rawPathname","pathname","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","route","action","err","return","defaultRoute","Error","status","StatusBar","display","loading","loadingObjs","cache","root","curr","ciEquals","b","localeCompare","sensitivity","autocompleteMenuStyle","borderRadius","boxShadow","padding","zIndex","SearchBar","n","ciIncludes","menuStyle","PreviewMenu","bottom","right","mainButtonStyles","actionButtonStyles","color","POPUP","MyFAB","popup","reactjs_popup_es","modal","closeOnDocumentClick","onClose","vals","fab_esm","index_esm","event","tooltipButton","draw","RightTooltip","float","Screen","App","defsLoaded","history","hash","src_StatusBar","src_SearchBar","location","menus_PreviewMenu","FAB","Tooltip","Table_TableMenu","Table_ColumnMenu","payload","ErrorBoundary","hasError","info","Boolean","hostname","uiInitialState","Map","setIn","toJS","addIds","v","del","createStore","createBrowserHistory","theStore","MouseController","menuOpened","Store","componentLoadedMap","omit","divPaths","callbacksByPath","cs","newPaths","ReactDOM","contexts_StoreProvider","es","cjs","backend","HTML5Backend","process","src_ErrorBoundary","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister","_propTypes","CellShape","oneOfType","element","colSpan","rowSpan","object","node","arrayOf"],"mappings":"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","file":"static/js/main.ad41257a.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderData = exports.renderValue = exports.ValueViewer = exports.DataEditor = exports.Cell = exports.Row = exports.Sheet = undefined;\n\nvar _DataSheet = require('./DataSheet');\n\nvar _DataSheet2 = _interopRequireDefault(_DataSheet);\n\nvar _Sheet = require('./Sheet');\n\nvar _Sheet2 = _interopRequireDefault(_Sheet);\n\nvar _Row = require('./Row');\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _Cell = require('./Cell');\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _DataEditor = require('./DataEditor');\n\nvar _DataEditor2 = _interopRequireDefault(_DataEditor);\n\nvar _ValueViewer = require('./ValueViewer');\n\nvar _ValueViewer2 = _interopRequireDefault(_ValueViewer);\n\nvar _renderHelpers = require('./renderHelpers');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = _DataSheet2.default;\nexports.Sheet = _Sheet2.default;\nexports.Row = _Row2.default;\nexports.Cell = _Cell2.default;\nexports.DataEditor = _DataEditor2.default;\nexports.ValueViewer = _ValueViewer2.default;\nexports.renderValue = _renderHelpers.renderValue;\nexports.renderData = _renderHelpers.renderData;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Sheet = require('./Sheet');\n\nvar _Sheet2 = _interopRequireDefault(_Sheet);\n\nvar _Row = require('./Row');\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _Cell = require('./Cell');\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _DataCell = require('./DataCell');\n\nvar _DataCell2 = _interopRequireDefault(_DataCell);\n\nvar _DataEditor = require('./DataEditor');\n\nvar _DataEditor2 = _interopRequireDefault(_DataEditor);\n\nvar _ValueViewer = require('./ValueViewer');\n\nvar _ValueViewer2 = _interopRequireDefault(_ValueViewer);\n\nvar _keys = require('./keys');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar isEmpty = function isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n};\n\nvar range = function range(start, end) {\n  var array = [];\n  var inc = end - start > 0;\n\n  for (var i = start; inc ? i <= end : i >= end; inc ? i++ : i--) {\n    inc ? array.push(i) : array.unshift(i);\n  }\n\n  return array;\n};\n\nvar defaultParsePaste = function defaultParsePaste(str) {\n  return str.split(/\\r\\n|\\n|\\r/).map(function (row) {\n    return row.split('\\t');\n  });\n};\n\nvar DataSheet = function (_PureComponent) {\n  _inherits(DataSheet, _PureComponent);\n\n  function DataSheet(props) {\n    _classCallCheck(this, DataSheet);\n\n    var _this = _possibleConstructorReturn(this, (DataSheet.__proto__ || Object.getPrototypeOf(DataSheet)).call(this, props));\n\n    _this.onMouseDown = _this.onMouseDown.bind(_this);\n    _this.onMouseUp = _this.onMouseUp.bind(_this);\n    _this.onMouseOver = _this.onMouseOver.bind(_this);\n    _this.onDoubleClick = _this.onDoubleClick.bind(_this);\n    _this.onContextMenu = _this.onContextMenu.bind(_this);\n    _this.handleNavigate = _this.handleNavigate.bind(_this);\n    _this.handleKey = _this.handleKey.bind(_this).bind(_this);\n    _this.handleCut = _this.handleCut.bind(_this);\n    _this.handleCopy = _this.handleCopy.bind(_this);\n    _this.handlePaste = _this.handlePaste.bind(_this);\n    _this.pageClick = _this.pageClick.bind(_this);\n    _this.onChange = _this.onChange.bind(_this);\n    _this.onRevert = _this.onRevert.bind(_this);\n    _this.isSelected = _this.isSelected.bind(_this);\n    _this.isEditing = _this.isEditing.bind(_this);\n    _this.isClearing = _this.isClearing.bind(_this);\n    _this.handleComponentKey = _this.handleComponentKey.bind(_this);\n    _this.handleKeyboardCellMovement = _this.handleKeyboardCellMovement.bind(_this);\n    _this.defaultState = {\n      start: {},\n      end: {},\n      selecting: false,\n      forceEdit: false,\n      editing: {},\n      clear: {}\n    };\n    _this.state = _this.defaultState;\n    _this.removeAllListeners = _this.removeAllListeners.bind(_this);\n    return _this;\n  }\n\n  _createClass(DataSheet, [{\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      document.removeEventListener('mousedown', this.pageClick);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {// Add listener scoped to the DataSheet that catches otherwise unhandled\n      // keyboard events when displaying components\n      //this.dgDom && this.dgDom.addEventListener('keydown', this.handleComponentKey)\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      //this.dgDom && this.dgDom.removeEventListener('keydown', this.handleComponentKey)\n      this.removeAllListeners();\n    }\n  }, {\n    key: 'isSelectionControlled',\n    value: function isSelectionControlled() {\n      return 'selected' in this.props;\n    }\n  }, {\n    key: 'getState',\n    value: function getState() {\n      var state = this.state;\n\n      if (this.isSelectionControlled()) {\n        var _ref = this.props.selected || {},\n            start = _ref.start,\n            end = _ref.end;\n\n        start = start || this.defaultState.start;\n        end = end || this.defaultState.end;\n        state = _extends({}, state, {\n          start: start,\n          end: end\n        });\n      }\n\n      return state;\n    }\n  }, {\n    key: '_setState',\n    value: function _setState(state) {\n      if (this.isSelectionControlled() && ('start' in state || 'end' in state)) {\n        var start = state.start,\n            end = state.end,\n            rest = _objectWithoutProperties(state, ['start', 'end']);\n\n        var _props = this.props,\n            selected = _props.selected,\n            onSelect = _props.onSelect;\n        selected = selected || {};\n\n        if (!start) {\n          start = 'start' in selected ? selected.start : this.defaultState.start;\n        }\n\n        if (!end) {\n          end = 'end' in selected ? selected.end : this.defaultState.end;\n        }\n\n        onSelect && onSelect({\n          start: start,\n          end: end\n        });\n        this.setState(rest);\n      } else {\n        this.setState(state);\n      }\n    }\n  }, {\n    key: 'pageClick',\n    value: function pageClick(e) {\n      var element = this.dgDom;\n\n      if (!element.contains(e.target)) {\n        this.setState(this.defaultState);\n        this.removeAllListeners();\n      }\n    }\n  }, {\n    key: 'handleCut',\n    value: function handleCut(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        this.handleCopy(e);\n\n        var _getState = this.getState(),\n            start = _getState.start,\n            end = _getState.end;\n\n        this.clearSelectedCells(start, end);\n      }\n    }\n  }, {\n    key: 'handleCopy',\n    value: function handleCopy(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        var _props2 = this.props,\n            dataRenderer = _props2.dataRenderer,\n            valueRenderer = _props2.valueRenderer,\n            data = _props2.data;\n\n        var _getState2 = this.getState(),\n            start = _getState2.start,\n            end = _getState2.end;\n\n        var text = range(start.i, end.i).map(function (i) {\n          return range(start.j, end.j).map(function (j) {\n            var cell = data[i][j];\n            var value = dataRenderer ? dataRenderer(cell, i, j) : null;\n\n            if (value === '' || value === null || typeof value === 'undefined') {\n              return valueRenderer(cell, i, j);\n            }\n\n            return value;\n          }).join('\\t');\n        }).join('\\n');\n        e.clipboardData.setData('text/plain', text);\n      }\n    }\n  }, {\n    key: 'handlePaste',\n    value: function handlePaste(e) {\n      if (isEmpty(this.state.editing)) {\n        var _getState3 = this.getState(),\n            start = _getState3.start,\n            end = _getState3.end;\n\n        start = {\n          i: Math.min(start.i, end.i),\n          j: Math.min(start.j, end.j)\n        };\n        end = {\n          i: Math.max(start.i, end.i),\n          j: Math.max(start.j, end.j)\n        };\n        var parse = this.props.parsePaste || defaultParsePaste;\n        var changes = [];\n        var pasteData = parse(e.clipboardData.getData('text/plain')); // in order of preference\n\n        var _props3 = this.props,\n            data = _props3.data,\n            onCellsChanged = _props3.onCellsChanged,\n            onPaste = _props3.onPaste,\n            onChange = _props3.onChange;\n\n        if (onCellsChanged) {\n          var additions = [];\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n\n              if (!cell) {\n                additions.push({\n                  row: end.i,\n                  col: end.j,\n                  value: value\n                });\n              } else if (!cell.readOnly) {\n                changes.push({\n                  cell: cell,\n                  row: end.i,\n                  col: end.j,\n                  value: value\n                });\n              }\n            });\n          });\n\n          if (additions.length) {\n            onCellsChanged(changes, additions);\n          } else {\n            onCellsChanged(changes);\n          }\n        } else if (onPaste) {\n          pasteData.forEach(function (row, i) {\n            var rowData = [];\n            row.forEach(function (pastedData, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n              rowData.push({\n                cell: cell,\n                data: pastedData\n              });\n            });\n            changes.push(rowData);\n          });\n          onPaste(changes);\n        } else if (onChange) {\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n\n              if (cell && !cell.readOnly) {\n                onChange(cell, end.i, end.j, value);\n              }\n            });\n          });\n        }\n\n        this._setState({\n          end: end\n        });\n      }\n    }\n  }, {\n    key: 'handleKeyboardCellMovement',\n    value: function handleKeyboardCellMovement(e) {\n      var commit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      console.log('handleKeyboardCellMovement');\n\n      var _getState4 = this.getState(),\n          start = _getState4.start,\n          editing = _getState4.editing;\n\n      var data = this.props.data;\n      var isEditing = editing && !isEmpty(editing);\n      var currentCell = data[start.i] && data[start.i][start.j];\n\n      if (isEditing && !commit) {\n        return false;\n      }\n\n      var hasComponent = currentCell && currentCell.component;\n      var keyCode = e.which || e.keyCode;\n\n      if (hasComponent && isEditing) {\n        e.preventDefault();\n        return;\n      }\n\n      if (keyCode === _keys.TAB_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: e.shiftKey ? -1 : 1\n        }, true);\n      } else if (keyCode === _keys.RIGHT_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: 1\n        });\n      } else if (keyCode === _keys.LEFT_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: -1\n        });\n      } else if (keyCode === _keys.UP_KEY) {\n        this.handleNavigate(e, {\n          i: -1,\n          j: 0\n        });\n      } else if (keyCode === _keys.DOWN_KEY) {\n        this.handleNavigate(e, {\n          i: 1,\n          j: 0\n        });\n      } else if (commit && keyCode === _keys.ENTER_KEY) {\n        this.handleNavigate(e, {\n          i: e.shiftKey ? -1 : 1,\n          j: 0\n        });\n      }\n    }\n  }, {\n    key: 'handleKey',\n    value: function handleKey(e) {\n      console.log('DataSheet.handleKey');\n\n      if (e.isPropagationStopped && e.isPropagationStopped()) {\n        return;\n      }\n\n      var keyCode = e.which || e.keyCode;\n\n      var _getState5 = this.getState(),\n          start = _getState5.start,\n          end = _getState5.end,\n          editing = _getState5.editing;\n\n      var isEditing = editing && !isEmpty(editing);\n      var noCellsSelected = !start || isEmpty(start);\n      var ctrlKeyPressed = e.ctrlKey || e.metaKey;\n      var deleteKeysPressed = keyCode === _keys.DELETE_KEY || keyCode === _keys.BACKSPACE_KEY;\n      var enterKeyPressed = keyCode === _keys.ENTER_KEY;\n      var numbersPressed = keyCode >= 48 && keyCode <= 57;\n      var lettersPressed = keyCode >= 65 && keyCode <= 90;\n      var latin1Supplement = keyCode >= 160 && keyCode <= 255;\n      var numPadKeysPressed = keyCode >= 96 && keyCode <= 105;\n      var currentCell = !noCellsSelected && this.props.data[start.i][start.j];\n      var equationKeysPressed = [187,\n      /* equal */\n      189,\n      /* substract */\n      190,\n      /* period */\n      107,\n      /* add */\n      109,\n      /* decimal point */\n      110].indexOf(keyCode) > -1;\n\n      if (noCellsSelected || ctrlKeyPressed) {\n        return true;\n      }\n\n      if (!isEditing) {\n        this.handleKeyboardCellMovement(e);\n\n        if (deleteKeysPressed) {\n          e.preventDefault();\n          this.clearSelectedCells(start, end);\n        } else if (currentCell && !currentCell.readOnly) {\n          if (enterKeyPressed) {\n            this._setState({\n              editing: start,\n              clear: {},\n              forceEdit: true\n            });\n\n            e.preventDefault();\n          } else if (numbersPressed || numPadKeysPressed || lettersPressed || latin1Supplement || equationKeysPressed) {\n            // empty out cell if user starts typing without pressing enter\n            this._setState({\n              editing: start,\n              clear: start,\n              forceEdit: false\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: 'getSelectedCells',\n    value: function getSelectedCells(data, start, end) {\n      var selected = [];\n      range(start.i, end.i).map(function (row) {\n        range(start.j, end.j).map(function (col) {\n          if (data[row] && data[row][col]) {\n            selected.push({\n              cell: data[row][col],\n              row: row,\n              col: col\n            });\n          }\n        });\n      });\n      return selected;\n    }\n  }, {\n    key: 'clearSelectedCells',\n    value: function clearSelectedCells(start, end) {\n      var _this2 = this;\n\n      var _props4 = this.props,\n          data = _props4.data,\n          onCellsChanged = _props4.onCellsChanged,\n          onChange = _props4.onChange;\n      var cells = this.getSelectedCells(data, start, end).filter(function (cell) {\n        return !cell.cell.readOnly;\n      }).map(function (cell) {\n        return _extends({}, cell, {\n          value: ''\n        });\n      });\n\n      if (onCellsChanged) {\n        onCellsChanged(cells);\n        this.onRevert();\n      } else if (onChange) {\n        // ugly solution brought to you by https://reactjs.org/docs/react-component.html#setstate\n        // setState in a loop is unreliable\n        setTimeout(function () {\n          cells.forEach(function (_ref2) {\n            var cell = _ref2.cell,\n                row = _ref2.row,\n                col = _ref2.col,\n                value = _ref2.value;\n            onChange(cell, row, col, value);\n          });\n\n          _this2.onRevert();\n        }, 0);\n      }\n    }\n  }, {\n    key: 'handleNavigate',\n    value: function handleNavigate(e, offsets, jumpRow) {\n      var _this3 = this;\n\n      if (offsets && (offsets.i || offsets.j)) {\n        var _getState6 = this.getState(),\n            start = _getState6.start;\n\n        var data = this.props.data;\n        var newLocation = {\n          i: start.i + offsets.i,\n          j: start.j + offsets.j\n        };\n\n        var updateLocation = function updateLocation() {\n          if (data[newLocation.i] && typeof data[newLocation.i][newLocation.j] !== 'undefined') {\n            _this3._setState({\n              start: newLocation,\n              end: newLocation,\n              editing: {}\n            });\n\n            e.preventDefault();\n            return true;\n          }\n\n          return false;\n        };\n\n        if (!updateLocation() && jumpRow) {\n          if (offsets.j < 0) {\n            newLocation = {\n              i: start.i - 1,\n              j: data[0].length - 1\n            };\n          } else {\n            newLocation = {\n              i: start.i + 1,\n              j: 0\n            };\n          }\n\n          updateLocation();\n        }\n      }\n    }\n  }, {\n    key: 'handleComponentKey',\n    value: function handleComponentKey(e) {\n      var _this4 = this;\n\n      console.log('handle component key'); // handles keyboard events when editing components\n\n      var keyCode = e.which || e.keyCode;\n\n      if (![_keys.ENTER_KEY, _keys.ESCAPE_KEY, _keys.TAB_KEY].includes(keyCode)) {\n        return;\n      }\n\n      var editing = this.state.editing;\n      var data = this.props.data;\n      var isEditing = !isEmpty(editing);\n\n      if (isEditing) {\n        var currentCell = data[editing.i][editing.j];\n        var offset = e.shiftKey ? -1 : 1;\n\n        if (currentCell && currentCell.component && !currentCell.forceComponent) {\n          e.preventDefault();\n          var func = this.onRevert; // ESCAPE_KEY\n\n          if (keyCode === _keys.ENTER_KEY) {\n            func = function func() {\n              return _this4.handleNavigate(e, {\n                i: offset,\n                j: 0\n              });\n            };\n          } else if (keyCode === _keys.TAB_KEY) {\n            func = function func() {\n              return _this4.handleNavigate(e, {\n                i: 0,\n                j: offset\n              }, true);\n            };\n          } // setTimeout makes sure that component is done handling the event before we take over\n\n\n          setTimeout(function () {\n            func();\n            _this4.dgDom && _this4.dgDom.focus();\n          }, 1);\n        }\n      }\n    }\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(evt, i, j) {\n      var cell = this.props.data[i][j];\n\n      if (this.props.onContextMenu) {\n        this.props.onContextMenu(evt, cell, i, j);\n      }\n    }\n  }, {\n    key: 'onDoubleClick',\n    value: function onDoubleClick(i, j) {\n      var cell = this.props.data[i][j];\n\n      if (!cell.readOnly) {\n        this._setState({\n          editing: {\n            i: i,\n            j: j\n          },\n          forceEdit: true,\n          clear: {}\n        });\n      }\n    }\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(i, j) {\n      var editing = isEmpty(this.state.editing) || this.state.editing.i !== i || this.state.editing.j !== j ? {} : this.state.editing;\n\n      this._setState({\n        selecting: true,\n        start: {\n          i: i,\n          j: j\n        },\n        end: {\n          i: i,\n          j: j\n        },\n        editing: editing,\n        forceEdit: false\n      }); // Keep listening to mouse if user releases the mouse (dragging outside)\n\n\n      document.addEventListener('mouseup', this.onMouseUp); // Listen for any outside mouse clicks\n\n      document.addEventListener('mousedown', this.pageClick); // Cut, copy and paste event handlers\n\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: 'onMouseOver',\n    value: function onMouseOver(i, j) {\n      if (this.state.selecting && isEmpty(this.state.editing)) {\n        this._setState({\n          end: {\n            i: i,\n            j: j\n          }\n        });\n      }\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp() {\n      this._setState({\n        selecting: false\n      });\n\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(row, col, value) {\n      var _props5 = this.props,\n          onChange = _props5.onChange,\n          onCellsChanged = _props5.onCellsChanged,\n          data = _props5.data;\n\n      if (onCellsChanged) {\n        onCellsChanged([{\n          cell: data[row][col],\n          row: row,\n          col: col,\n          value: value\n        }]);\n      } else if (onChange) {\n        onChange(data[row][col], row, col, value);\n      }\n\n      this.onRevert();\n    }\n  }, {\n    key: 'onRevert',\n    value: function onRevert() {\n      this._setState({\n        editing: {}\n      });\n\n      this.dgDom && this.dgDom.focus();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _state = this.state,\n          start = _state.start,\n          end = _state.end;\n      var prevEnd = prevState.end;\n\n      if (!isEmpty(end) && !(end.i === prevEnd.i && end.j === prevEnd.j) && !this.isSelectionControlled()) {\n        this.props.onSelect && this.props.onSelect({\n          start: start,\n          end: end\n        });\n      }\n    }\n  }, {\n    key: 'isSelected',\n    value: function isSelected(i, j) {\n      var _getState7 = this.getState(),\n          start = _getState7.start,\n          end = _getState7.end;\n\n      var posX = j >= start.j && j <= end.j;\n      var negX = j <= start.j && j >= end.j;\n      var posY = i >= start.i && i <= end.i;\n      var negY = i <= start.i && i >= end.i;\n      return posX && posY || negX && posY || negX && negY || posX && negY;\n    }\n  }, {\n    key: 'isEditing',\n    value: function isEditing(i, j) {\n      return this.state.editing.i === i && this.state.editing.j === j;\n    }\n  }, {\n    key: 'isClearing',\n    value: function isClearing(i, j) {\n      return this.state.clear.i === i && this.state.clear.j === j;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var _props6 = this.props,\n          SheetRenderer = _props6.sheetRenderer,\n          RowRenderer = _props6.rowRenderer,\n          cellRenderer = _props6.cellRenderer,\n          dataRenderer = _props6.dataRenderer,\n          valueRenderer = _props6.valueRenderer,\n          dataEditor = _props6.dataEditor,\n          valueViewer = _props6.valueViewer,\n          attributesRenderer = _props6.attributesRenderer,\n          className = _props6.className,\n          overflow = _props6.overflow,\n          data = _props6.data,\n          keyFn = _props6.keyFn;\n      var forceEdit = this.state.forceEdit;\n      return _react2.default.createElement('span', {\n        ref: function ref(r) {\n          _this5.dgDom = r;\n        },\n        tabIndex: '0',\n        className: 'data-grid-container',\n        onKeyDown: this.handleKey\n      }, _react2.default.createElement(SheetRenderer, {\n        data: data,\n        className: ['data-grid', className, overflow].filter(function (a) {\n          return a;\n        }).join(' ')\n      }, data.map(function (row, i) {\n        return _react2.default.createElement(RowRenderer, {\n          key: keyFn ? keyFn(i) : i,\n          row: i,\n          cells: row\n        }, row.map(function (cell, j) {\n          return _react2.default.createElement(_DataCell2.default, {\n            key: cell.key ? cell.key : i + '-' + j,\n            row: i,\n            col: j,\n            cell: cell,\n            forceEdit: forceEdit,\n            onMouseDown: _this5.onMouseDown,\n            onMouseOver: _this5.onMouseOver,\n            onDoubleClick: _this5.onDoubleClick,\n            onContextMenu: _this5.onContextMenu,\n            onChange: _this5.onChange,\n            onRevert: _this5.onRevert,\n            onNavigate: _this5.handleKeyboardCellMovement,\n            onKey: _this5.handleKey,\n            selected: _this5.isSelected(i, j),\n            editing: _this5.isEditing(i, j),\n            clearing: _this5.isClearing(i, j),\n            attributesRenderer: attributesRenderer,\n            cellRenderer: cellRenderer,\n            valueRenderer: valueRenderer,\n            dataRenderer: dataRenderer,\n            valueViewer: valueViewer,\n            dataEditor: dataEditor,\n            handleComponentKey: _this5.handleComponentKey\n          });\n        }));\n      })));\n    }\n  }]);\n\n  return DataSheet;\n}(_react.PureComponent);\n\nexports.default = DataSheet;\nDataSheet.propTypes = {\n  data: _propTypes2.default.array.isRequired,\n  className: _propTypes2.default.string,\n  overflow: _propTypes2.default.oneOf(['wrap', 'nowrap', 'clip']),\n  onChange: _propTypes2.default.func,\n  onCellsChanged: _propTypes2.default.func,\n  onContextMenu: _propTypes2.default.func,\n  onSelect: _propTypes2.default.func,\n  selected: _propTypes2.default.shape({\n    start: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    }),\n    end: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    })\n  }),\n  valueRenderer: _propTypes2.default.func.isRequired,\n  dataRenderer: _propTypes2.default.func,\n  sheetRenderer: _propTypes2.default.func.isRequired,\n  rowRenderer: _propTypes2.default.func.isRequired,\n  cellRenderer: _propTypes2.default.func.isRequired,\n  valueViewer: _propTypes2.default.func,\n  dataEditor: _propTypes2.default.func,\n  parsePaste: _propTypes2.default.func,\n  attributesRenderer: _propTypes2.default.func,\n  keyFn: _propTypes2.default.func\n};\nDataSheet.defaultProps = {\n  sheetRenderer: _Sheet2.default,\n  rowRenderer: _Row2.default,\n  cellRenderer: _Cell2.default,\n  valueViewer: _ValueViewer2.default,\n  dataEditor: _DataEditor2.default\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _keys = require('./keys');\n\nvar _Cell = require('./Cell');\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _CellShape = require('./CellShape');\n\nvar _CellShape2 = _interopRequireDefault(_CellShape);\n\nvar _DataEditor = require('./DataEditor');\n\nvar _DataEditor2 = _interopRequireDefault(_DataEditor);\n\nvar _ValueViewer = require('./ValueViewer');\n\nvar _ValueViewer2 = _interopRequireDefault(_ValueViewer);\n\nvar _renderHelpers = require('./renderHelpers');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction initialData(_ref) {\n  var cell = _ref.cell,\n      row = _ref.row,\n      col = _ref.col,\n      valueRenderer = _ref.valueRenderer,\n      dataRenderer = _ref.dataRenderer;\n  return (0, _renderHelpers.renderData)(cell, row, col, valueRenderer, dataRenderer);\n}\n\nfunction initialValue(_ref2) {\n  var cell = _ref2.cell,\n      row = _ref2.row,\n      col = _ref2.col,\n      valueRenderer = _ref2.valueRenderer;\n  return (0, _renderHelpers.renderValue)(cell, row, col, valueRenderer);\n}\n\nfunction widthStyle(cell) {\n  var width = typeof cell.width === 'number' ? cell.width + 'px' : cell.width;\n  return width ? {\n    width: width\n  } : null;\n}\n\nvar DataCell = function (_PureComponent) {\n  _inherits(DataCell, _PureComponent);\n\n  function DataCell(props) {\n    _classCallCheck(this, DataCell);\n\n    var _this = _possibleConstructorReturn(this, (DataCell.__proto__ || Object.getPrototypeOf(DataCell)).call(this, props));\n\n    _this.handleChange = _this.handleChange.bind(_this);\n    _this.handleCommit = _this.handleCommit.bind(_this);\n    _this.handleRevert = _this.handleRevert.bind(_this);\n    _this.handleKey = _this.handleKey.bind(_this);\n    _this.handleMouseDown = _this.handleMouseDown.bind(_this);\n    _this.handleMouseOver = _this.handleMouseOver.bind(_this);\n    _this.handleContextMenu = _this.handleContextMenu.bind(_this);\n    _this.handleDoubleClick = _this.handleDoubleClick.bind(_this);\n    _this.state = {\n      updated: false,\n      reverting: false,\n      value: '',\n      committing: false\n    };\n    return _this;\n  }\n\n  _createClass(DataCell, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (initialValue(nextProps) !== initialValue(this.props)) {\n        this.setState({\n          updated: true\n        });\n        this.timeout = setTimeout(function () {\n          return _this2.setState({\n            updated: false\n          });\n        }, 700);\n      }\n\n      if (nextProps.editing === true && this.props.editing === false) {\n        var value = nextProps.clearing ? '' : initialData(nextProps);\n        this.setState({\n          value: value,\n          reverting: false\n        });\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.editing === true && this.props.editing === false && !this.state.reverting && !this.state.committing && this.state.value !== initialData(this.props)) {\n        this.props.onChange(this.props.row, this.props.col, this.state.value);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.timeout);\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(value) {\n      this.setState({\n        value: value,\n        committing: false\n      });\n    }\n  }, {\n    key: 'handleCommit',\n    value: function handleCommit(value, e) {\n      var _props = this.props,\n          onChange = _props.onChange,\n          onNavigate = _props.onNavigate;\n\n      if (value !== initialData(this.props)) {\n        this.setState({\n          value: value,\n          committing: true\n        });\n        onChange(this.props.row, this.props.col, value);\n      } else {\n        this.handleRevert();\n      }\n\n      if (e) {\n        e.preventDefault();\n        onNavigate(e, true);\n      }\n    }\n  }, {\n    key: 'handleRevert',\n    value: function handleRevert() {\n      this.setState({\n        reverting: true\n      });\n      this.props.onRevert();\n    }\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown(e) {\n      var _props2 = this.props,\n          row = _props2.row,\n          col = _props2.col,\n          onMouseDown = _props2.onMouseDown,\n          cell = _props2.cell;\n\n      if (!cell.disableEvents) {\n        onMouseDown(row, col);\n      }\n    }\n  }, {\n    key: 'handleMouseOver',\n    value: function handleMouseOver(e) {\n      var _props3 = this.props,\n          row = _props3.row,\n          col = _props3.col,\n          onMouseOver = _props3.onMouseOver,\n          cell = _props3.cell;\n\n      if (!cell.disableEvents) {\n        onMouseOver(row, col);\n      }\n    }\n  }, {\n    key: 'handleDoubleClick',\n    value: function handleDoubleClick(e) {\n      var _props4 = this.props,\n          row = _props4.row,\n          col = _props4.col,\n          onDoubleClick = _props4.onDoubleClick,\n          cell = _props4.cell;\n\n      if (!cell.disableEvents) {\n        onDoubleClick(row, col);\n      }\n    }\n  }, {\n    key: 'handleContextMenu',\n    value: function handleContextMenu(e) {\n      var _props5 = this.props,\n          row = _props5.row,\n          col = _props5.col,\n          onContextMenu = _props5.onContextMenu,\n          cell = _props5.cell;\n\n      if (!cell.disableEvents) {\n        onContextMenu(e, row, col);\n      }\n    }\n  }, {\n    key: 'handleKey',\n    value: function handleKey(e) {\n      console.log('DataCell.handleKey');\n      var keyCode = e.which || e.keyCode;\n\n      if (keyCode === _keys.ESCAPE_KEY) {\n        return this.handleRevert();\n      }\n\n      var _props6 = this.props,\n          component = _props6.cell.component,\n          forceEdit = _props6.forceEdit;\n      var eatKeys = forceEdit || !!component;\n      var commit = keyCode === _keys.ENTER_KEY || keyCode === _keys.TAB_KEY || !eatKeys && [_keys.LEFT_KEY, _keys.RIGHT_KEY, _keys.UP_KEY, _keys.DOWN_KEY].includes(keyCode);\n\n      if (commit) {\n        this.handleCommit(this.state.value, e);\n      }\n\n      if (this.props.handleComponentKey) {\n        this.props.handleComponentKey(e);\n      }\n    }\n  }, {\n    key: 'renderComponent',\n    value: function renderComponent(editing, cell) {\n      var component = cell.component,\n          readOnly = cell.readOnly,\n          forceComponent = cell.forceComponent;\n\n      if (editing && !readOnly || forceComponent) {\n        return component;\n      }\n    }\n  }, {\n    key: 'renderEditor',\n    value: function renderEditor(editing, cell, row, col, dataEditor) {\n      if (editing) {\n        var Editor = cell.dataEditor || dataEditor || _DataEditor2.default;\n        return _react2.default.createElement(Editor, {\n          cell: cell,\n          row: row,\n          col: col,\n          value: this.state.value,\n          onChange: this.handleChange,\n          onCommit: this.handleCommit,\n          onRevert: this.handleRevert,\n          onKeyDown: this.handleKey\n        });\n      }\n    }\n  }, {\n    key: 'renderViewer',\n    value: function renderViewer(cell, row, col, valueRenderer, valueViewer) {\n      var Viewer = cell.valueViewer || valueViewer || _ValueViewer2.default;\n      var value = (0, _renderHelpers.renderValue)(cell, row, col, valueRenderer);\n      return _react2.default.createElement(Viewer, {\n        cell: cell,\n        row: row,\n        col: col,\n        value: value\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props7 = this.props,\n          row = _props7.row,\n          col = _props7.col,\n          cell = _props7.cell,\n          CellRenderer = _props7.cellRenderer,\n          valueRenderer = _props7.valueRenderer,\n          dataEditor = _props7.dataEditor,\n          valueViewer = _props7.valueViewer,\n          attributesRenderer = _props7.attributesRenderer,\n          selected = _props7.selected,\n          editing = _props7.editing,\n          onKeyUp = _props7.onKeyUp;\n      var updated = this.state.updated;\n      var content = this.renderComponent(editing, cell) || this.renderEditor(editing, cell, row, col, dataEditor) || this.renderViewer(cell, row, col, valueRenderer, valueViewer);\n      var className = [cell.className, 'cell', cell.overflow, selected && 'selected', editing && 'editing', cell.readOnly && 'read-only', updated && 'updated'].filter(function (a) {\n        return a;\n      }).join(' ');\n      return _react2.default.createElement(CellRenderer, {\n        row: row,\n        col: col,\n        cell: cell,\n        selected: selected,\n        editing: editing,\n        updated: updated,\n        attributesRenderer: attributesRenderer,\n        className: className,\n        style: widthStyle(cell),\n        onMouseDown: this.handleMouseDown,\n        onMouseOver: this.handleMouseOver,\n        onDoubleClick: this.handleDoubleClick,\n        onContextMenu: this.handleContextMenu,\n        onKeyUp: onKeyUp\n      }, content);\n    }\n  }]);\n\n  return DataCell;\n}(_react.PureComponent);\n\nexports.default = DataCell;\nDataCell.propTypes = {\n  row: _propTypes2.default.number.isRequired,\n  col: _propTypes2.default.number.isRequired,\n  cell: _propTypes2.default.shape(_CellShape2.default).isRequired,\n  forceEdit: _propTypes2.default.bool,\n  selected: _propTypes2.default.bool,\n  editing: _propTypes2.default.bool,\n  clearing: _propTypes2.default.bool,\n  cellRenderer: _propTypes2.default.func,\n  valueRenderer: _propTypes2.default.func.isRequired,\n  dataRenderer: _propTypes2.default.func,\n  valueViewer: _propTypes2.default.func,\n  dataEditor: _propTypes2.default.func,\n  attributesRenderer: _propTypes2.default.func,\n  onNavigate: _propTypes2.default.func.isRequired,\n  onMouseDown: _propTypes2.default.func.isRequired,\n  onMouseOver: _propTypes2.default.func.isRequired,\n  onDoubleClick: _propTypes2.default.func.isRequired,\n  onContextMenu: _propTypes2.default.func.isRequired,\n  onChange: _propTypes2.default.func.isRequired,\n  onRevert: _propTypes2.default.func.isRequired\n};\nDataCell.defaultProps = {\n  forceEdit: false,\n  selected: false,\n  editing: false,\n  clearing: false,\n  cellRenderer: _Cell2.default\n};","export const TOGGLE_EDIT_MODE = \"TOGGLE_EDIT_MODE\";\nexport const NEW_TABLE = \"NEW_TABLE\";\nexport const DEFS_LOADED = \"DEFS_LOADED\";\n\nexport const DELETE_TABLE = \"DELETE_TABLE\";\nexport const DELETE_COLUMN = \"DELETE_COLUMN\";\n\nexport const UPDATE_DEF = \"UPDATE_DEF\";\nexport const UPDATE_DEFS = \"UPDATE_DEFS\";\n\nexport const CACHE = {\n  LIST: \"CACHE_LIST\",\n  SET: \"CACHE_SET\",\n  NEW: \"CACHE_NEW\",\n  DEL: \"CACHE_DELETE\",\n  PUSH: \"CACHE_PUSH\",\n}\n","class Helper {\n  static nextTableName(defs) {\n    let i = 1;\n    const defsName = Object.keys(defs).reduce((acc,k) => {\n      acc[defs[k].name] = true\n      return acc;\n    }, {})\n    while (defsName[\"table\" + i]) {i++}\n    return \"table\" + i\n  }\n}\n\nexport function nextColumnName(def) {\n  if (!def.cols) { return 'A' }\n  return String.fromCharCode(65 + Object.keys(def.cols).length);\n}\n\nexport default Helper;\n","export const TABLES = 'tables';\nexport const TABLES2 = 'tables2';\nexport const DEFS = 'defs';\nexport const ITEMS = 'items';\nexport const SCREEN = 'items';// Screen should be deleted...\nexport const LAYOUT = 'layout';\nexport const PREVIEW = 'previews';\nexport const UI = 'ui';\n\n// A Table contains all the data\n// A Table has one Def\n// A Def belongs to a Table\n//\n// A Screen has many Table to show\n","import * as ACTION from \"../constants/action-types\"\nimport _ from 'lodash'\n\nimport Helper, {nextColumnName} from '../Helper'\n\nimport * as TABLE from '../constants/tables'\n\nimport uuidv1 from 'uuid/v1'\n\nexport function toggleEditMode() {\n  return { type: ACTION.TOGGLE_EDIT_MODE };\n};\n\nconst EMPTY_DEF = {backgroundColor: \"\", showLineNumbers: true, layout: [[\"\"]]}\nexport function newTable(db, defs, theName,theId,callback) {\n  const name = theName || Helper.nextTableName(defs)\n  const id = theId || uuidv1();\n  const idCol = uuidv1();\n  const def = {...EMPTY_DEF, name, cols: {}}\n  def.cols[idCol] = {name: \"A\", id: idCol}\n  def.layout = [[idCol]]\n  db.set([TABLE.DEFS,id],def,callback)\n  return { type: ACTION.NEW_TABLE, name: id, def };\n};\n\nexport function defsLoaded(defs) {\n  console.log('Loading defs')\n  return { type: ACTION.DEFS_LOADED, payload: defs };\n  //return { type: ACTION.CACHE.SET, path: TABLE.DEFS, defs };\n};\n\nexport function columnDropped(db, theDef, from, to) {\n  let def = {...theDef}\n  let cols = [...def.layout[0]]\n  cols.splice(to, 0, ...cols.splice(from, 1))\n  def.layout[0] = cols\n  db.set([TABLE.DEFS,def.id],def)\n  return { type: ACTION.UPDATE_DEF, def };\n};\n\nfunction withColumn(theDef,layoutNb) {\n  const def = {...theDef}\n  const id = uuidv1();\n  const oldCols = def.cols || {}\n  const cols = {...oldCols, [id]: {name: nextColumnName(def), type: \"\"}}\n  def.cols = cols\n  def.layout[layoutNb] = [...def.layout[layoutNb], id]\n  return def\n}\n\nexport function addColumn(db, theDef, layoutNb) {\n  const def = withColumn(theDef, layoutNb)\n  db.set([TABLE.DEFS,def.id],def)\n  return { type: ACTION.UPDATE_DEF, def };\n};\n\nexport function addColumnUnder(db, theDef) {\n  const def = {...theDef}\n  const id = uuidv1();\n  const oldCols = def.cols || {}\n  const cols = {...oldCols, [id]: {name: nextColumnName(def), type: \"\"}}\n  def.cols = cols\n  def.layout[def.layout.length] = [id]\n  db.set([TABLE.DEFS,def.id],def)\n  return { type: ACTION.UPDATE_DEF, def };\n}\n\nfunction withoutColumn(theDef, columnId, layoutNb) {\n  const def = {...theDef}\n  const cols = _.keys(def.cols)\n    .filter(c => c !== columnId)\n    .reduce((acc,k) => ({...acc, [k]: def.cols[k]}),{})\n  def.cols = cols\n  def.layout[layoutNb] = def.layout[layoutNb].filter(e => e !== columnId)\n  return def\n}\n\nexport function deletePath(db, path) {\n  db.unset(path)\n  return { type: ACTION.CACHE.SET, path: [\"root\", ..._.castArray(path)], val: null };\n}\n\nexport function deleteColumn(db, theDef, columnId, layoutNb) {\n  const def = withoutColumn(theDef, columnId, layoutNb)\n  db.set([TABLE.DEFS],def.id,def)\n  return { type: ACTION.UPDATE_DEF, def };\n};\n\nexport function modelLoaded(path, val) {\n  return { type: ACTION.CACHE.SET, path, val };\n};\n\nexport function addTableToScreen(screen, name) {\n  const val = {...screen.tables, [name]: true}\n  return { type: ACTION.CACHE.SET, path: ['screen', \"tables\"], val }\n};\n\nexport function updateDb(db,path,vals) {\n  db.update(path, vals)\n  return { type: ACTION.CACHE.SET, path: [\"root\", ..._.castArray(path)], vals };\n}\n\nexport function setDb(db, path, val) {\n  db.set(path,val)\n  // TODO: Try this replacement\n  //return { type: ACTION.CACHE.SET, path: [\"root\", ..._.castArray(path)], val };\n  if (path.constructor === Array) {\n    return { type: ACTION.CACHE.SET, path: [\"root\", ...path], val };\n  } else {\n    return { type: ACTION.CACHE.SET, path: [\"root\", path], val };\n  }\n}\n\nexport function set(path, val) {\n  if (path.constructor === Array) {\n    return { type: ACTION.CACHE.SET, path: [\"root\", ...path], val };\n  } else {\n    return { type: ACTION.CACHE.SET, path: [\"root\", path], val };\n  }\n}\n\nexport function addPreview(db, tableId) {\n  const id = uuidv1();\n  const p = {id, width: 50, height: 50, x: 0, y:0, tableId}\n  return setDb(db, [TABLE.PREVIEW, id], p)\n}\n\nexport function push(path, val) {\n  if (path.constructor === Array) {\n    return { type: ACTION.CACHE.PUSH, path: [\"root\", ...path], val };\n  } else {\n    return { type: ACTION.CACHE.PUSH, path: [\"root\", path], val };\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\";\nimport { Menu, Item, Submenu } from 'react-contexify'\n\nimport { set, deleteColumn } from '../actions'\n\nimport * as TABLE from '../constants/tables'\n\nconst mapStateToProps = state => ({\n  db: state.db,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  deleteColumn: (db) => ({props}) => dispatch(deleteColumn(db,props.def,props.id,props.layoutNb)),\n  set: path => val => dispatch(set(path,val)),\n});\n\nclass ColumnMenu extends React.Component {\n\n  onTypeChange = (type) => ({props}) => {\n    const path = [TABLE.DEFS,props.def.id,'cols',props.id,'type']\n    this.props.db.set(path,type, this.props.set(path, type));\n  }\n\n  render() {\n    console.log('----------------------------------------------------')\n    const {db} = this.props;\n    return(\n      <Menu id=\"columnMenu\">\n        <Item onClick={this.props.deleteColumn(db)}>delete column</Item>\n        <Submenu label=\"type\">\n          <Item onClick={this.onTypeChange('')}>none</Item>\n          <Item onClick={this.onTypeChange('link')}>link</Item>\n          <Item onClick={this.onTypeChange('checkbox')}>checkbox</Item>\n          <Item onClick={this.onTypeChange('document')}>document</Item>\n        </Submenu>\n      </Menu>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColumnMenu);\n","import _ from 'lodash'\nimport React from \"react\"\nimport { connect } from \"react-redux\";\nimport { Menu, Item, Submenu } from 'react-contexify'\n\nimport { addColumn, deleteTable, addColumnUnder } from '../actions'\n\nconst mapStateToProps = state => ({\n  db: state.db,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  addColumn: (db) => (({props}) => dispatch(addColumn(db, props.def, props.layoutNb))),\n  addColumnUnder: (db) => (({props}) => dispatch(addColumnUnder(db, props.def, props.layoutNb))),\n  //deleteTable: (props) => dispatch(deleteTable()),\n});\n\nclass TableMenu extends React.Component {\n  render() {\n    const {db} = this.props\n    return(\n      <Menu id=\"tableMenu\">\n        <Item onClick={this.props.addColumn(db)}>add column</Item>\n        <Item onClick={this.props.addColumnUnder(db)}>add column under</Item>\n        <Item onClick={({props}) => console.log(props)}>test</Item>\n        {/*<Item onClick={this.props.deleteTable}>delete table</Item>*/}\n        {/*(def && def.cols) ?\n          <Submenu label=\"order by\">\n            {_.values(_.mapValues(def.cols, 'name')).map((n,i) => (\n              <Item key={i} onClick={() => alert('works')}>{n}</Item>\n            ))}\n          </Submenu> : null*/}\n      </Menu>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TableMenu);\n","export const UI_LOADING = ['ui','loading'];\nexport const ROUTE = ['ui','route'];\n","import { DragSource, DropTarget } from 'react-dnd'\n\n/**\n * Specifies which props to inject into your component.\n */\nfunction rowSourceCollect (connect, _monitor) {\n  return {\n    // Call this function inside render()\n    // to let React DnD handle the drag events:\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview()\n  }\n}\n\n/**\n * Specifies the drag source contract.\n * Only `beginDrag` function is required.\n */\nconst rowSourceSpec = {\n  beginDrag (props) {\n    return {\n      rowIndex: props.rowIndex\n    }\n  }\n}\n\nfunction rowTargetCollect (connect, monitor) {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver() && monitor.canDrop()\n  }\n}\n\nconst rowTargetSpec = {\n  canDrop (props, monitor) {\n    const item = monitor.getItem()\n    return props.rowIndex !== item.rowIndex\n  },\n\n  drop (props, monitor, component) {\n    if (monitor.didDrop()) {\n      return\n    }\n    // Obtain the dragged item\n    const { rowIndex: fromIndex } = monitor.getItem()\n    const { rowIndex: toIndex, onRowDrop } = props\n    onRowDrop(fromIndex, toIndex)\n  }\n}\n\nfunction colSourceCollect (connect, _monitor) {\n  return {\n    // Call this function inside render()\n    // to let React DnD handle the drag events:\n    connectDragSource: connect.dragSource()\n  }\n}\n\nconst colSourceSpec = {\n  beginDrag (props) {\n    return {\n      columnIndex: props.columnIndex\n    }\n  }\n}\n\nfunction colTargetCollect (connect, monitor) {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver() && monitor.canDrop()\n  }\n}\n\nconst colTargetSpec = {\n  canDrop (props, monitor) {\n    const item = monitor.getItem()\n    // return item.row !== props.row\n    return props.columnIndex !== item.columnIndex\n  },\n\n  drop (props, monitor, component) {\n    if (monitor.didDrop()) {\n      return\n    }\n\n    // Obtain the dragged item\n    const { columnIndex: fromIndex } = monitor.getItem()\n    const { columnIndex: toIndex, onColumnDrop } = props\n    onColumnDrop(fromIndex, toIndex)\n  }\n}\n\nexport const colDragSource = DragSource('col', colSourceSpec, colSourceCollect)\nexport const colDropTarget = DropTarget('col', colTargetSpec, colTargetCollect)\nexport const rowDragSource = DragSource('row', rowSourceSpec, rowSourceCollect)\nexport const rowDropTarget = DropTarget('row', rowTargetSpec, rowTargetCollect)\n","import _ from 'lodash'\nimport axios from 'axios'\n//import adapter from 'axios/lib/adapters/http';\n\nconst dbname = process.env.NODE_ENV === 'production' ? 'prod_db' : 'dev_db'\nconst port = 8000\n\nfunction _path(path) {\n  return _.castArray(path).join('.')\n}\n\nclass SimpleDb {\n  stash = (rawPath,file) => { return null }\n\n  get = (path, callback) => {\n    axios.get('http://localhost:'+port+'/'+dbname+'/'+_path(path))\n    .then(response => {\n      if (callback) {\n        callback(response.data)\n      }\n    })\n    .catch(function (error) {\n      // handle error\n      console.log(error);\n    })\n    .finally(function () {\n      // always executed\n    });\n  }\n  set = (path, val, callback) => {\n    axios.put('http://localhost:'+port+'/'+dbname+'/'+_path(path),{data: val},{ headers: { 'Content-Type': 'application/json' }})\n    .then(response => {\n      if (callback) {\n        callback()\n      }\n    })\n    .catch(function (error) {\n      // handle error\n      console.log(error);\n    })\n    .finally(function () {\n      // always executed\n    });\n  }\n  unset = (path, callback) => {\n    axios.delete('http://localhost:'+port+'/'+dbname+'/'+_path(path))\n    .then(response => {\n      if (callback) {\n        callback()\n      }\n    })\n    .catch(function (error) {\n      // handle error\n      console.log(error);\n    })\n    .finally(function () {\n      // always executed\n    });\n  }\n\n  update = (path, updates) => {\n    _.keys(updates).forEach(k => {\n      this.set(_path(path) + '.' + k, updates[k], null)\n    })    \n  }\n}\n\nexport default SimpleDb;\n","import React, {useState} from 'react'\nimport _ from 'lodash'\nimport SimpleDb from './SimpleDb'\n//import { connect } from \"react-redux\"\n//import store from './SingletonStore'\n\nexport const PREVIEWS = 'previews'\nexport const TABLES = 'tables'\nexport const NESTED = 'foo.bar.blah' // nested exemple\nexport const MOUSE_ACTION = 'mouseAction'\nexport const MOUSE_ACTION_DRAG = 'drag'\n\nfunction _path(path) {\n  if (typeof path === 'string') {\n    return path\n  } else {\n    return _.castArray(path).join('.')\n  }\n}\n\n// Lazy loading data\n// The issue with lazy loading is that it makes render functions non pure.\nclass Store {\n  constructor(data) {\n    this.data = data || {} // Immutable maybe???\n    this.callbacksByPath = {}\n    this.componentLoadedMap = {}\n    this.db = new SimpleDb()\n  }\n  // Format could be array, string\n  get = (path) => {\n    return _.get(this.data, path)\n    /*const isLoaded = _.get(this.componentLoadedMap, path)\n    if (isLoaded) {\n      return _.get(this.data, path)\n    } else {\n      this.db.get(path, (data) => {\n        this.set(path, data)\n        _.set(this.componentLoadedMap, path)\n      })\n    }*/\n  }\n\n  load = (paths) => {\n    if (!this.db) {return null}\n    console.log('loading: ' + paths)\n    _.castArray(paths).forEach(path => {\n      const isLoaded = _.get(this.componentLoadedMap, path)\n      if (!isLoaded) {\n        this.db.get(path, (data) => {\n          _.set(this.componentLoadedMap, path, true)\n          this.set(path, data)\n        })\n      }\n    })\n  }\n   \n  dispatch = (path, val) => {\n    if (this.db) {this.db.set(path,val)}\n    this.set(path,val)\n  }\n\n  unset = (rawPath, val) => {\n    let path = _path(rawPath)\n    console.log('unsetting ' + path)\n    this.data = _.omit(this.data, [rawPath])\n    const divPaths = path.split('.')\n    for (let i = divPaths.length; i > 0; i--) {\n      path = _path(divPaths.slice(0,i))\n      if (this.callbacksByPath[path]) {\n        const cs = this.callbacksByPath[path].filter(c => c ? true : false)\n        console.log('' + cs.length + ' callbacks called')\n        _.forEach(cs, c => {\n          c(val)\n        })\n      }\n    }\n  }\n\n  dispatchDelete = (path) => {\n    if (this.db) {this.db.unset(path)}\n    this.unset(path)\n  }\n\n  dispatchUpdate = (path, updates) => {\n    if (this.db) {this.db.update(path, updates)}\n    _.keys(updates).forEach(k => {\n      this.set(_path(path) + '.' + k, updates[k])\n    })    \n  }\n\n  set = (rawPath, val) => {\n    let path = _path(rawPath)\n    console.log('setting ' + path)\n    // TODO: Before updating, checks that the value has really changed\n    _.set(this.data, path, val)\n    const divPaths = path.split('.')\n    for (let i = divPaths.length; i > 0; i--) {\n      path = _path(divPaths.slice(0,i))\n      if (this.callbacksByPath[path]) {\n        const cs = this.callbacksByPath[path].filter(c => c ? true : false)\n        console.log('' + cs.length + ' callbacks called')\n        _.forEach(cs, c => {\n          c(val)\n        })\n      }\n    }\n  }\n\n  // whenever the value of any of the paths changes, rerender the component\n  subscribe = (rawPaths, callback) => {\n    const paths = _.castArray(rawPaths)\n    paths.forEach(p => {\n      const newPaths = [..._.castArray(this.callbacksByPath[p]), callback]\n      this.callbacksByPath[p] = newPaths\n      this.componentLoadedMap[p] = false\n    })\n  }\n\n}\n\nconst StoreContext = React.createContext({})\n\nclass StoreProvider extends React.Component {\n  render() {\n    // This provider will never update because it's always the same reference.\n    return <StoreContext.Provider value={this.props.store}>\n      {this.props.children}\n    </StoreContext.Provider>\n  }\n}\n\n// FUNCTION avec\n// avec (rawModels : String or [String], Comp : React Component) => (props)\n// avec is the french word for with which is a reserved keyword in javascript\n// avec(MODEL.PREVIEW,\n// avec should load and rerender the components whenever they change.\nconst avec = (rawPaths, Comp) => (props) => {\n  const [subProps, setSubProps] = useState(null)\n  const paths = _.castArray(rawPaths)\n  const logSetSubProps = (blah) => {\n    // important to make sure the subProps is never null\n    // because null is used to mean that is was never loaded\n    return setSubProps(blah || {}) \n  }\n  //const storeProps = paths.reduce((acc,curr) => {\n  //  _.set(acc, curr, \n  //},{})\n  return <StoreContext.Consumer>\n    {store => {\n      if (subProps !== null) {\n        // TODO: Only pass the data needed, don't pass the whole store.data\n        return <Comp {...props} {...store.data} {...storeProps(store)} />\n      } else {\n        store.subscribe(paths, logSetSubProps)\n        store.load(paths)\n        return null\n      }\n    }}\n  </StoreContext.Consumer>\n}\n\nfunction storeProps(store) {\n  return {\n    dispatch: store.dispatch,\n    dispatchDelete: store.dispatchDelete,\n    dispatchUpdate: store.dispatchUpdate,\n  }\n}\n\nconst withDispatch = (Comp) => (props) => {\n  return <StoreContext.Consumer>\n    {store => {\n      return <Comp {...props} {...storeProps(store)}/>\n    }}\n  </StoreContext.Consumer>\n}\n\n//export avec(PREVIEWS)(Exemple)\n//export avec([TABLES, PREVIEWS])(Exemple)\n\nexport {withDispatch}\nexport {StoreProvider}\nexport {Store}\nexport {avec}\n","import _ from 'lodash'\nimport React from 'react'\nimport { connect } from \"react-redux\";\nimport { MenuProvider } from 'react-contexify'\nimport { columnDropped } from '../actions'\nimport { colDragSource, colDropTarget } from './drag-drop.js'\nimport { RIEInput } from 'riek'\nimport { set } from '../actions'\nimport * as TABLE from '../constants/tables'\nimport {withDispatch} from '../contexts'\n\nconst colMapStateToProps = state => ({\n  db: state.db,\n});\n\nconst colMapDispatchToProps = dispatch => ({\n  set: path => val => dispatch(set(path,val))\n})\n\nclass ColumnNameBase extends React.Component {\n\n  onColumnNameChange = (props) => {\n    const path = [TABLE.DEFS,this.props.def.id,'cols',this.props.col.id,'name']\n    this.props.dispatch(path,props.columnName)\n    //this.props.db.set(path,props.columnName,\n    //  this.props.set(path, props.columnName));\n  }\n\n  render = () => {\n    return (\n      <RIEInput\n        value={this.props.col.name}\n        change={this.onColumnNameChange}\n        propName='columnName'\n        validate={_.isString} />\n    )\n  }\n}\n\nconst ColumnName = connect(colMapStateToProps, colMapDispatchToProps)(withDispatch(ColumnNameBase));\n\nclass HeaderBase extends React.Component {\n  render() {\n    const { def, col, connectDragSource, connectDropTarget, isOver} = this.props\n    const className = 'rTableHead cell read-only' + (isOver ? 'drop-target' : '')\n    return (\n      connectDropTarget(\n        connectDragSource(\n          <div className={className} style={{ width: col.width }}>\n            <MenuProvider id=\"columnMenu\"\n              data={{id: col.id, layoutNb: this.props.layoutNb, def}}\n              className=\"columnMenu menu\"\n            >\n              <ColumnName col={col} def={def}/>\n            </MenuProvider>\n          </div>\n        )))\n  }\n}\nconst Header = colDropTarget(colDragSource(HeaderBase))\n\nconst mapStateToProps = state => ({\n  db: state.db,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onColumnDrop: (db, def) => (from, to) => dispatch(columnDropped(db, def, from, to)),\n})\n\nclass SheetRenderer extends React.PureComponent {\n  render () {\n    const { db, className, def } = this.props\n    return (\n      <div className={\"rTable \"+className}\n           style={{backgroundColor: this.props.def.backgroundColor}}>\n        { this.props.hideColumnNames || this.props.isField ? null :\n        <div className=\"rTableHeading\">\n          <div className=\"rTableRow\">\n            <div className='rTableHead cell read-only row-handle' key='$$actionCell'\n              style={{width: 30/*FIXME: The width varies with the nb of rows*/}}\n            />\n            {\n              (def.layout && def.cols) ?\n                def.layout[this.props.layoutNb].map((id, index) => {\n                  const col = def.cols[id]\n                  return (\n                    <Header key={id} col={col} def={def} className=\"data-header\"\n                      columnIndex={index} layoutNb={this.props.layoutNb}\n                      onColumnDrop={this.props.onColumnDrop(this.props.db, def)}\n                    />\n                  );\n                }) : null\n            }\n          </div>\n        </div>}\n        <div className=\"rTableBody data-body\">\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SheetRenderer);\n","import React from 'react'\nimport { MenuProvider } from 'react-contexify'\nimport Table from '../Table'\nimport SheetRenderer from './SheetRenderer'\n\nclass MenuSheetRenderer extends React.Component {\n  render = () => {return (\n    <React.Fragment>\n      <MenuProvider id=\"tableMenu\" data={{def: this.props.def, layoutNb: this.props.layoutNb}} className=\"tableMenu\">\n        <SheetRenderer {...this.props}/>\n      </MenuProvider>\n    </React.Fragment>\n  )};\n}\n\nconst RowRenderer = (props) => {\n  return (\n    <div className={\"rTableRow \" + props.className}>\n      { props.children }\n    </div>\n  )\n}\n\nconst CellRenderer = props => {\n  const {cell, row, col, columns, attributesRenderer, hideLineNumbers,\n    selected, editing, updated, style, ...rest } = props\n\n  // hey, how about some custom attributes on our cell?\n  const attributes = cell.attributes || {}\n  // ignore default style handed to us by the component and roll our own\n  //attributes.style = { width: columns[col].width }\n  //if (col === 0) {\n  //  attributes.title = cell.label\n  //}\n  if (hideLineNumbers && col === 0) {\n    return null\n  }\n  const value = cell.value\n  if (typeof value.slice === 'function' && value.slice(0,2) === '==') {\n    return (\n      <div {...rest} {...attributes}>\n        <Table id={value.slice(2)} hideColumnNames={false} hideTableName={true} />\n      </div>\n    )\n  }\n  return (\n      <div {...rest} {...attributes}>\n        {props.children}\n      </div>\n  )\n}\n\nexport { SheetRenderer, RowRenderer, CellRenderer, MenuSheetRenderer }\n","import { connect } from \"react-redux\"\nimport _ from 'lodash'\nimport React from 'react'\nimport Files from 'react-files'\n\nconst mapStateToProps = state => ({\n  db: state.db,\n})\n\nconst mapDispatchToProps = dispatch => ({\n})\n\nclass Image extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      files: [],\n    }\n  }\n  componentDidMount = () => {\n    const path = _.castArray('images/'+this.props.id).join('/');\n    const infoPath = 'storage/'+path;\n    const thisComponent = this\n    this.props.db.get(infoPath, function(snapshot) {\n      thisComponent.setState({downloadUrl: snapshot})\n    })\n  }\n\n  onFilesChange = (files) => {\n    this.setState({\n      files\n    }, () => {\n      console.log(this.state.files)\n    })\n    this.props.db.stash('images/'+this.props.id,files[0])\n  }\n\n  onFilesError = (error, file) => {\n    console.log('error code ' + error.code + ': ' + error.message)\n  }\n\n  render () {\n    if (this.state.downloadUrl) {\n      return (\n        <img src={this.state.downloadUrl} alt='[image]'/>\n      )\n    }\n    return (\n      <div>\n        <Files\n          ref='files'\n          className='files-dropzone-gallery'\n          onChange={this.onFilesChange}\n          onError={this.onFilesError}\n          accepts={['image/*']}\n          maxFiles={1}\n          maxFileSize={10000000}\n          minFileSize={0}\n          clickable\n        >\n          {\n            this.state.files.length > 0\n            ? <div className='files-gallery'>\n              {this.state.files.map((file) =>\n                <img className='files-gallery-item' src={file.preview.url} key={file.id} />\n              )}\n            </div>\n            : <div>Drop images here</div>\n          }\n        </Files>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Image)\n","import React from \"react\"\nimport { connect } from \"react-redux\";\n\nimport {set} from '../actions'\nimport * as PATH from '../constants/paths'\n\nconst mapStateToProps = state => ({\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  set: (path,val) => dispatch(set(path,val)),\n});\n\nclass Link extends React.Component {\n  render() {\n    const r = new RegExp('^(?:[a-z]+:)?//', 'i');\n    const isAbsolutePath = r.test(this.props.to)\n    return isAbsolutePath ?\n      <a href={this.props.to}>{this.props.children}</a> :\n      <span onClick={() => {console.log('link clicked');this.props.set(PATH.ROUTE,this.props.to)}} className=\"link\">\n        {this.props.children}\n      </span>\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Link);\n","import React, { useState } from 'react'\nimport _ from 'lodash'\nimport { newTable } from \"./actions\"\nimport Link from './Link'\nimport { connect } from \"react-redux\"\nimport Table from './Table'\n\nconst HiddenTable = (props) => {\n  const [hidden, setHidden] = useState(true)\n  return (\n    <React.Fragment>\n      <span onClick={() => setHidden(!hidden)}>{hidden ? '+ ' : '- '}</span>\n      <Link to={'/tables/'+props.id}>{props.name}</Link>\n      {hidden ? null : <Table {...props} hideTableName={true}/>}\n    </React.Fragment>\n  )\n}\n\nconst tableLinkProps = (state) => ({\n  db: state.db,\n  defs: state.defs,\n})\nconst tableLinkDispatch = (dispatch) => ({\n  newTable: (db, defs, name) => () => dispatch(newTable(db,defs,name)),\n})\n\nconst TableLink = connect(tableLinkProps,tableLinkDispatch)((props) => {\n  if (props.defs == null) { return null }\n  const defId = props.id || _.keys(props.defs).find(e => props.defs[e].name === props.name)\n  if (defId) {\n    //return <Link to={'/tables/'+defId}>{props.defs[defId].name}</Link>\n    return <HiddenTable id={defId} name={props.name}/>\n  } else {\n    return 'no table matches'\n  }\n})\n\nexport default TableLink\n","import React from 'react'\nimport _ from 'lodash'\nimport Image from './Image'\nimport ABCJS from 'abcjs/midi'\n//import MathJax from 'react-mathjax'\nimport uuidv1 from 'uuid/v1'\nimport TableLink from './TableLink'\n\nimport 'abcjs/abcjs-midi.css'\n\nwindow.uuidv1 = uuidv1\n\nclass PrintABC extends React.Component {\n  componentDidMount = () => {\n    const {content, renderMidi} = this.props\n    ABCJS.renderAbc(this.div, content);\n    if (renderMidi) {\n      ABCJS.renderMidi(this.divMidi, content);\n    }\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <div ref={el => this.div=el}/>\n        <div ref={el => this.divMidi=el}id=\"midi\"></div>\n      </React.Fragment>\n    )\n  }\n}\n// TODO: Give it a range\nwindow.abcLines = (header, lines) => {\n}\n\nwindow.abcLine = (header, line) => {\n  return <PrintABC content={header + '\\n' + line}/>\n}\n\nwindow.playAbcLines = () => {\n}\n\nwindow.abc = (content)  => {\n  return <PrintABC content={content} renderMidi={true}/>\n}\n\n  /*window.exampleTex = () => { \n    return (\n        <MathJax.Provider>\n            <div>\n                This is an inline math formula: <MathJax.Node inline formula={'a = b'} />\n                And a block one:\n \n                <MathJax.Node formula={tex} />\n            </div>\n        </MathJax.Provider>\n    );\n}\n\nwindow.tex = (formula) => {\n    return (\n        <MathJax.Provider>\n                <MathJax.Node formula={formula} />\n        </MathJax.Provider>\n    );\n}*/\n\n\n//<Table id={p.tableId} hideColumnNames={true} hideTableName={true} hideLineNumbers={true}/>\n\n\n\n      /*} else {\n    if (props.name) {\n      newTable(props.db,props.defs,props.name)\n      return 'creating table...'\n    } else {\n      return 'invalid table name'\n    }*/\n\nwindow.table = (name) => {\n  return <TableLink name={name}/>\n}\n\nconst makeAbsoluteURL = (url) => {\n  const r = new RegExp('^(?:[a-z]+:)?//', 'i');\n  const isAbsolutePath = r.test(url)\n  return (isAbsolutePath) ? url : 'http://' + url;\n}\n\nconst addDotCom = (url) => {\n  const r = new RegExp('\\\\.+', 'i');\n  const hasDot = r.test(url)\n  return (hasDot) ? url : url + '.com';\n}\n\n// The address can be absolute: $('A1')\n// The address can be relative: $('A+1'), $('A-1')\n// $('A0') is relative, since the first line starts at 1, not 0\n// $('')\nwindow.$ = (address) => {\n  const {table,def,i} = window.context\n  let row = ''\n  let columnName = '' \n  let addRelative = false\n  let susRelative = false\n  for (let k = 0; k < address.length; k++) {\n    if (address[k] === '+') {\n      addRelative = true\n    } else if (address[k] === '-') {\n      susRelative = true\n    } else if (isNaN(address[k])) {\n      columnName += address[k]\n    } else {\n      row += address[k]\n    }\n  }\n  row = parseInt(row)\n\n  const colId = _.keys(def.cols).filter(k => (def.cols[k].name === columnName))\n  // Handles relative path\n  if (addRelative) {\n    return table[colId][i+row]\n  } else if (susRelative) {\n    return table[colId][i-row]\n  } else if (row === 0) {\n    return table[colId][i]\n  } else { // Or return absolute path\n    return table[colId][row-1]\n  }\n}\n\n// TODO: Afficher les options dans l'autocomplete\nwindow.meteo = (ville,options={lang: 'fr'}) => {\n  if (options.lang === 'en') {\n    return <iframe title=\"Environment Canada Weather\" width=\"287px\" height=\"191px\"\n      src=\"https://weather.gc.ca/wxlink/wxlink.html?cityCode=qc-136&amp;lang=e\"\n      allowtransparency=\"true\"\n      frameBorder=\"0\">\n    </iframe>\n  }\n  return <iframe title=\"Météo Environnement Canada\" width=\"287px\" height=\"191px\" src=\"https://meteo.gc.ca/wxlink/wxlink.html?cityCode=qc-136&amp;lang=f\" allowtransparency=\"true\" frameBorder=\"0\"></iframe>\n}\n\nwindow.test = addDotCom\n\n// Makes a valid url\nconst validURL = (url) => {\n  return addDotCom(makeAbsoluteURL(url))\n}\n\nwindow.img = (src) => {\n  return <img src={src} alt={'[img]'}/>\n}\n\nwindow.image = (id) => {\n  return id ? <Image id={id}/> : 'Image id required'\n}\n\nwindow.figure = (id) => (window.center(window.image(id)))\n\nwindow.title = (str) => {\n  return <div style={{textAlign: 'center', fontWeight: 'bold', fontSize: '2rem'}}>{str}</div> \n}\n\nwindow.subtitle = (str) => {\n  return <div style={{marginLeft: '5%', textDecoration: 'underline', fontSize: '1.5rem'}}>{str}</div> \n}\n\nwindow.underline = (str) => {\n  return <div style={{textDecoration: 'underline'}}>{str}</div> \n}\n\nwindow.bold = (str) => {\n  return <span style={{fontWeight: 'bold'}}>{str}</span> \n}\n\nwindow.center = (str) => {\n  return <div style={{textAlign: 'center'}}>{str}</div> \n}\n\nwindow.lineThrough = (str) => {\n  return <div style={{textDecoration: 'line-through'}}>{str}</div>\n}\n\nwindow.favicon = (site) => {\n  const url = validURL(site)\n  // Trick: Use the browser to parse the url\n  const a = document.createElement('a') \n  a.href = url\n  const path = a.origin + '/favicon.ico'\n  return <img width='14px' height='14px' src={path} alt={'[ico]'}/>\n}\n\nwindow.bookmark = (site,name) => {\n  return (\n    <React.Fragment>\n      {window.favicon(site)}\n      {window.a(site,name)}\n    </React.Fragment>\n  )\n}\n\nwindow.a = (link,name) => {\n  const url = validURL(link)\n  return <a href={url}>{name ? name : link}</a>\n}\n\nconst COMMANDS = {\n  img: {desc: 'Renders an image with the html <img> tag.', args: [{name: 'src', type: 'string', desc: 'the url of the image'}]},\n  tex: {desc: 'Renders a TeX equation using MathJax', args: [{name: 'formula', type: 'string', desc: 'the TeX formula'}]},\n  image: {desc: 'Renders a field to upload or drop an image', args: [{name: 'id', type: 'string', desc: 'the id to reference the image'}]},\n  figure: {desc: 'Renders a centered image', args: [{name: 'id', type: 'string', desc: 'the id to reference the figure'}]},\n  $: {desc: 'Gets the value at the given spreadsheet reference', args: [{name: 'address', type: 'string', desc: 'the spreadsheet reference'}]},\n  meteo: {desc: 'Affiche la meteo d\\'environment canada', args: [{name: 'ville', type: 'string', desc: 'la ville'},{name: 'options', type: 'Object', desc: 'lang: fr ou en'}]},\n  title: {desc: '', args: [{name: '', type: '', desc: ''}]},\n  subtitle: {desc: '', args: [{name: '', type: '', desc: ''}]},\n  center: {desc: '', args: [{name: '', type: '', desc: ''}]},\n  bold: {desc: '', args: [{name: '', type: '', desc: ''}]},\n  underline: {desc: '', args: [{name: '', type: '', desc: ''}]},\n  favicon: {desc: '', args: [{name: '', type: '', desc: ''}]},\n  bookmark: {desc: '', args: [{name: '', type: '', desc: ''}]},\n  a: {desc: '', args: [{name: '', type: '', desc: ''}]},\n}\n\nwindow.help = () => {\n  return (\n    <div>  \n      {_.keys(COMMANDS).map(k => (\n        <div key={k}>\n          {window.bold(k)} (\n          {COMMANDS[k].args.map(arg => arg.name + ': ' + arg.type).join(', ')}\n          ) : <br /> -> {COMMANDS[k].desc}\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport { COMMANDS }\n","import React, { PureComponent } from 'react'\nimport _ from 'lodash'\nimport Autocomplete from 'react-autocomplete'\nimport { COMMANDS } from '../Command'\n\nexport default class DataEditor extends PureComponent {\n  constructor (props) {\n    super(props)\n    this.handleChange = this.handleChange.bind(this)\n    this.renderTextArea = this.renderTextArea.bind(this)\n    this.onKeyDown = this.onKeyDown.bind(this)\n  }\n\n  componentDidMount () {\n    this._input.focus()\n  }\n\n  componentDidUpdate () {\n    this._input.focus()\n  }\n\n  handleChange (e) {\n    this.props.onChange(e.target.value)\n  }\n\n  textAreaKeyDown = (e) => {\n    console.log(e)\n    if (e.keyCode === 8 || e.keyCode === 46) {// backspace or delete\n      if (this.props.value.length <= 1) {\n        this.props.onChange(e.target.value)\n      }\n    }\n  }\n\n  renderTextArea (props) {\n    return (<div onKeyDown={this.onKeyDown}>\n      <textarea {...props}\n        value={this.props.value.slice(1)}\n        ref={input => { this._input = input }}\n        onChange={(e) => {this.props.onChange('='+e.target.value)}}\n        onKeyDown={this.textAreaKeyDown}\n      />\n    </div>)\n  }\n\n  renderList = (props) => {\n    /*const { value, onKeyDown } = this.props\n    return (\n      <div>\n        <input\n          ref={input => { this._input = input }}\n          className='data-editor'\n          value={value}\n          onKeyDown={onKeyDown}\n          onChange={this.handleChange}\n        />\n        <input\n          ref={input => { this._input = input }}\n          className='data-editor'\n          value={value}\n          onKeyDown={onKeyDown}\n          onChange={this.handleChange}\n        />\n      </div>\n    )*/\n  }\n\n  onKeyDown (e) {\n    e.stopPropagation()\n  }\n\n  render () {\n    const { value, onKeyDown } = this.props\n    if (value && value[0] === '=') { return this.renderTextArea() }\n    //if (value && value[0] === '/') { return this.renderList() }\n    return (\n      <input\n        ref={input => { this._input = input }}\n        className='data-editor'\n        value={value}\n        onKeyDown={onKeyDown}\n        onChange={this.handleChange}\n      />\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport ReactDataSheet from 'react-datasheet';\nimport _ from 'lodash'\nimport { MenuSheetRenderer, RowRenderer, CellRenderer } from './DatasheetTable'\nimport DataEditor from './DataEditor'\nimport { connect } from \"react-redux\";\nimport uuidv1 from 'uuid/v1'\nimport { set, setDb, newTable } from '../actions'\nimport * as TABLE from '../constants/tables'\nimport TableLink from '../TableLink'\nimport {withDispatch} from '../contexts'\n\nconst stringify = function(obj) {\n\ttry {\n\t\treturn JSON.stringify(obj);\n\t} catch(e) {\n\t\treturn obj.toString();\n\t}\n}\nconst mapStateToProps = state => ({\n  db: state.db,\n  defs: state.defs,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  set: path => val => dispatch(set(path,val)),\n  setDb: (db,path,val) => dispatch(setDb(db, path, val)),\n  newTable: (db, defs, id) => dispatch(newTable(db,defs,null,id)),\n});\n\nclass DatasheetTable extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {reload: false, selection: {}}\n  }\n  \n  renderSheet = (props) => (\n    <MenuSheetRenderer {...props} {...this.props} />\n  )\n  \n  generateGrid = (def) => {\n    const {table, layoutNb} = this.props\n    const colIds = def.layout[layoutNb];\n    const nb = table ? Math.max(...colIds.map(id => table[id] ? table[id].length || 0 : 0)) : 0\n\n    const mapColIdsToValues = function(id) {\n      return {value: table[id] ? table[id][i] || '' : ''}\n    }\n\n    let emptyLine = new Array(colIds.length).fill({value: \"\"})\n    let grid = []\n    for (var i = 0; i < nb; ++i) {\n      grid.push(colIds.map(mapColIdsToValues))\n    }\n\n    if (nb === 0) {\n      grid.push(emptyLine)\n    }\n\n    // Add a column for line numbers\n    grid = grid.map((l,j) => [{readOnly: true, value:j+1}, ...l])\n    return grid\n  }\n\n  column = (col) => {\n    return this.cols()[this.props.def.layout[this.props.layoutNb][col-1]]\n  }\n\n  cols = () => ((this.props.def || {}).cols)\n\n  valueFromCell = (cell,i,j) => {\n    let value = undefined\n    let style = undefined\n    if (j === 0 && this.props.hideLineNumbers) {return <span></span>}\n    if (j === 0 && this.props.isField) {\n      const cols = this.props.def.layout[this.props.layoutNb]\n      const colName = this.props.def.cols[cols[0]].name\n      return <div>{colName}</div>\n    }\n    if (this.cols() && !cell.readOnly) {\n      let col = this.column(j);\n      if (col.type === \"document\") {\n        style = {textAlign: 'justify',paddingLeft: '15%',paddingRight: '15%'}\n      }\n      if (cell.value && cell.value[0] === '=') { // = should be pure\n        try {\n          window.context = {\n            table: this.props.table,\n            def: this.props.def,\n            i, j,\n          }\n          const result = eval.call(window, cell.value.slice(1)); // FIXME: In onCellsChanged, eval there, set type to \"function\"\n          if (typeof result === 'object' && result !== null) {\n            //return JSON.stringify(result)\n            value = result\n          } else if (result === true) {\n            value = 'true'\n          } else if (result === false) {\n            value = 'false'\n          } else if (result === undefined) {\n            value = 'undefined'\n          } else {\n            value = result\n          }\n        } catch(error) {\n\t\t\t\t  value = error.toString();\n        }\n      } else if (cell.value && cell.value[0] === ':') { // : has side effects\n          value = (<button onClick={() => {\n            eval.call(window, cell.value.slice(1))\n            this.setState({reload: !this.state.reload})\n          }}>\n            {cell.value.slice(1)}\n          </button>)\n      } else {\n        if (col && col.type) {\n          if (col.type === \"link\" && cell.value) {\n            value = (<a href={cell.value}>{cell.value}</a>);\n          } else if (col.type === \"bullet\") {\n            value = (<span>&bull;</span>)\n          }/* FIXME: TO FIX else if (col.type === \"checkbox\") {\n            value = (<input type=\"checkbox\" defaultChecked={cell.value} onChange={() => {\n              const path = [TABLE.TABLES,this.props.def.id,i,col.name]\n              const val = cell.value ? !cell.value : 1;\n              this.props.db.set(path, val, this.props.set(path))\n            }}/>)\n          } */else {\n            value = cell.value\n          }\n        }\n      }\n    }\n    return <div style={style}>{value ? value : cell.value}</div>\n  }\n\n  dataRenderer = (def) => (cell,i,j) => {\n    return cell.value;\n    let colIds = def.layout[this.props.layoutNb];\n    let val = (this.props.table || []).filter(e => e && e === colIds[j] ? 1 : 0)[i]\n    return val;\n  }\n\n  cellRenderer = (props) => {\n    return <CellRenderer {...props} hideLineNumbers={this.props.hideLineNumbers}/>\n  }\n\n  dataEditor = (props) => {\n    return <DataEditor {...props}/>\n  }\n  handleSelect = (sel) => { // {start,end}\n    this.setState({selection: {...sel}})\n  }\n  keyDown = (e) => {\n    if (e.keyCode === 191) { // keycode for /\n      console.log('creating a sub table')\n      const {i,j} = this.state.selection.start\n      const id = uuidv1()\n      this.props.onCellsChanged([{row: i, col: j, value: '=='+id}])\n      this.props.newTable(this.props.db, this.props.defs, id)\n      e.preventDefault()\n      e.stopPropagation()\n    } else if (e.keyCode === 40) { // down arrow\n      // FIXME: Duplicated from above, but this will change anyway\n      const {table, layoutNb, def} = this.props\n      const colIds = def.layout[layoutNb];\n      const nb = table ? Math.max(...colIds.map(id => table[id] ? table[id].length || 0 : 0)) : 0\n      // adds another line\n      if (this.state.selection && this.state.selection.start.i + 1 >= nb) {\n        console.log('adding another line')\n        let colId = def.layout[layoutNb][0]\n        //this.props.setDb(this.props.db,[TABLE.TABLES,this.props.id,colId,nb],'')\n        this.props.dispatch([TABLE.TABLES,this.props.id,colId,nb],'')\n      }\n    } else if (e.keyCode === 8 || e.keyCode === 46) {// backspace or delete\n      const start = this.state.selection.start\n      const end = this.state.selection.end\n      if (start && (start.j === 0 || end.j === 0)) { // Deletes lines\n        const startI = Math.min(start.i,end.i)\n        const endI = Math.max(start.i,end.i)\n        this.props.onDeleteLines(this.props.layoutNb, startI, endI)\n      }\n    }\n  } \n  render() {\n    return (\n      <div onKeyDown={this.keyDown}>\n        <ReactDataSheet\n          data={this.generateGrid(this.props.def)}\n          sheetRenderer={this.renderSheet}\n          rowRenderer={RowRenderer}\n          cellRenderer={this.cellRenderer}\n          valueRenderer={this.valueFromCell}\n          dataRenderer={this.dataRenderer(this.props.def)}\n          dataEditor={this.dataEditor}\n          onCellsChanged={this.props.onCellsChanged}\n          onSelect={this.handleSelect}\n        />\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withDispatch(DatasheetTable));\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport * as TABLE from '../constants/tables'\nimport * as PATH from '../constants/paths'\nimport DatasheetTable from '../DatasheetTable'\n\nimport { RIEInput } from 'riek'\nimport { set, setDb } from '../actions'\nimport _ from 'lodash'\nimport {avec, TABLES} from '../contexts'\n\nconst mapStateToProps = state => ({\n  db: state.db,\n  defs: state.defs,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  set: path => val => dispatch(set(path,val)),\n  setDb: (db, path, val) => dispatch(setDb(db, path,val)),\n})\n\nclass Table extends React.Component {\n\n  def = () => this.props.defs[this.props.id];\n  \n  onCellsChanged = (layoutNb) => (changes, additions) => {\n    //let data = this.data() ? {...this.data()} : {}\n    let data = this.props.tables ? this.props.tables[this.props.id] : {}\n    if (data === \"\") {data = {}}\n    //let data = this.props.data || {}\n    const def = this.def()\n    changes.concat(additions || []).forEach(({cell, row, col, value, type}) => {\n\n      // ugly temporary fix to separate a cell\n      if (cell && cell.value.slice(0,2) === '==' && !value) { return } \n\n      let colId = def.layout[layoutNb][col-1]\n      const d = data[colId]\n      // In JSON, an array is an object\n      if (typeof d === 'object') {\n        const dataCol = d\n        dataCol[row] = value || ''\n        data[colId] = dataCol\n      } else { // Array\n        const dataCol = [...(d || [])]\n        dataCol[row] = value || ''\n        data[colId] = dataCol\n      }\n    })\n    console.log('onCellsChanged')\n    console.log(data)\n    //this.props.db.set([TABLE.TABLES,this.props.id],data)\n    this.props.dispatch([TABLE.TABLES,this.props.id],data)\n    this.setState({data})\n  }\n\n  onDeleteLines = (layoutNb, start, end) => {\n    //let data = this.props.data\n    let data = this.props.tables ? this.props.tables[this.props.id] : {}\n    if (data === \"\") {data = {}}\n    const def = this.def()\n\n    const colIds = def.layout[layoutNb];\n    const mTable = colIds.reduce((nTable, colId) => {\n      nTable[colId] = [...data[colId].slice(0,start), ...data[colId].slice(end+1)]\n      return nTable\n    },{})\n\n    this.props.db.set([TABLE.TABLES,this.props.id],{...data, ...mTable})\n    this.setState({data})\n  }\n\n  renderDatasheetTable = () => {\n    if (!this.props.tables) {return null}\n    const def = this.props.defs[this.props.id];\n    return def.layout.map((e,i) => {\n      let isField = false\n      // show a field\n      const cols = def.layout[i]\n      // If no columns side by side and only one value, show as a field\n      if (cols.length === 1 && this.props.tables && this.props.tables[this.props.id]) {\n        const rows = this.props.tables[this.props.id][cols[0]]\n        if (!rows || rows.length === 1) {\n          isField = true\n        }\n      }\n      if (!this.props.tables || !this.props.tables[this.props.id]) {\n        isField = true\n      }\n      return (\n        <DatasheetTable\n          key={'DatasheetTable'+def.id+i}\n          def={def}\n          table={this.props.tables[this.props.id]}\n          onCellsChanged={this.onCellsChanged(i)}\n          onDeleteLines={this.onDeleteLines}\n          hideLineNumbers={this.props.hideLineNumbers}\n          isField={isField}\n          layoutNb={i}\n          {...this.props}\n        />);\n    })\n  }\n\n  onTitleChange = (props) => {\n    this.props.db.set([TABLE.DEFS,this.props.id,'name'],props.title,\n      this.props.set([TABLE.DEFS,this.props.id,'name'], props.title));\n  }\n  \n  onIconChange = (props) => {\n    this.props.db.set([TABLE.DEFS,this.props.id,'icon'],props.icon,\n      this.props.set([TABLE.DEFS,this.props.id,'icon'], props.icon));\n  }\n\n  onMouseDown = (e) => {\n    // Does not work but the idea is good I think\n    // It actually works, but not in the correct order...\n    console.log('table on mouse down')\n    //e.preventDefault()\n    //e.stopPropagation(); // In order to only click in the inner most table\n  }\n\n  render() {\n    if (!this.def()) {console.log('no def yet'); return null;}\n    return (\n      <div className=\"Table\" onMouseDown={this.onMouseDown}>\n        { this.props.hideTableName ? null :\n          <div style={{textAlign: 'center'}}>\n          <span className='title'>\n            <RIEInput\n              value={this.def().name}\n              change={this.onTitleChange}\n              propName='title'\n              validate={_.isString} />\n          </span>\n          <span onClick={() => {\n            // TODO: Add a comment that says the table has been moved\n            // to trash and will be deleted in a certain period of time permanently.\n            // Offers to delete it permanently right now.\n            this.props.setDb(this.props.db, [TABLE.DEFS, this.props.id, 'del'],'1')\n            this.props.set(PATH.ROUTE)('/')\n          }}\n          className='link'>🗑</span>\n        </div>}\n        {this.renderDatasheetTable()}\n        { this.props.hideTableName ? null : 'Add field'}\n      </div>\n    );\n  }\n\n}\n\nconst AvecTable = (props) => {\n  const Component = avec(TABLES+'.'+props.id, Table)\n  return <Component {...props}/>\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AvecTable);\n","import React from \"react\"\nimport { connect } from \"react-redux\";\nimport { Menu, Item, Submenu } from 'react-contexify'\nimport uuidv1 from 'uuid/v1'\nimport * as TABLE from '../constants/tables'\n\nimport { toggleEditMode, setDb } from \"../actions\";\n\nconst onClickMenu = ({ event, props }) => console.log(event,props);\n\nconst mapStateToProps = state => ({\n  db: state.db,\n  defs: state.defs,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  toggleEditMode: () => dispatch(toggleEditMode()),\n  newLink: (db) => () => dispatch(setDb(db,[TABLE.ITEMS,uuidv1()],{desc: \"link\"})),\n});\n\nclass ScreenMenu extends React.Component {\n  render() {\n    return(\n      <Menu id=\"link_screen_menu\">\n        <Item onClick={this.props.newLink(this.props.db)}\n              data={{test: 10}}>new link</Item>\n        <Item onClick={this.props.toggleEditMode}>edit mode</Item>\n      </Menu>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenMenu);\n","const ByPass = (props) => props.if ? (props.children.props.children) : props.children\n\nexport default ByPass;\n","import React from 'react'\n\nclass Selection extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {hidden: true};\n    this.x1 = 0\n    this.y1 = 0\n    this.x2 = 0\n    this.y2 = 0\n  }\n  smallerX = () => Math.min(this.x1,this.x2); //Smaller X\n  largerX = () => Math.max(this.x1,this.x2); //Larger X\n  smallerY = () => Math.min(this.y1,this.y2); //Smaller Y\n  largerY = () => Math.max(this.y1,this.y2); //Larger Y\n\n  reCalc = () => { //This will restyle the div\n      const style = {}\n      style.left = this.smallerX() + 'px';\n      style.top = this.smallerY() + 'px';\n      style.width = this.largerX() - this.smallerX() + 'px';\n      style.height = this.largerY() - this.smallerY() + 'px';\n      this.setState({style,hidden: false})\n  }\n  onMouseDown = (e) => {\n    //if (!this.props.canStart || this.props.canStart(e)) {\n    if (true || !this.props.canStart || this.props.canStart(e)) {\n      this.x1 = e.pageX; //Set the initial X\n      this.y1 = e.pageY; //Set the initial Y\n      this.x2 = e.pageX;\n      this.y2 = e.pageY;\n      this.reCalc();\n      if (this.props.onMouseDown) {\n        this.props.onMouseDown(e)\n      }\n    }\n  };\n  onMouseMove = (e) => {\n    console.log('onMouseMove')\n    if (!this.state.hidden) {\n      this.x2 = e.pageX; //Update the current position X\n      this.y2 = e.pageY; //Update the current position Y\n      this.reCalc();\n    }\n  };\n  onMouseUp = (e) => {\n    if (!this.state.hidden) {\n      this.setState({hidden:true})\n      if (this.props.onSelect) {\n        this.props.onSelect(this.smallerX(),this.largerX(),this.smallerY(),this.largerY())\n      }\n    }\n  };\n\n  render = () => {\n    return (\n      <div id=\"selectionDiv\"\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onMouseMove={this.onMouseMove}\n      >\n        {this.props.children}\n        <div id=\"selectionRectangle\"\n          hidden={this.state.hidden}\n          style={this.state.style}\n        >\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Selection\n","import React, {useState} from 'react'\nimport { connect } from \"react-redux\"\nimport {DraggableCore} from 'react-draggable'\nimport {withDispatch} from './contexts'\n\nconst dragLinkProps = (state) => ({\n  db: state.db\n})\n\n// TODO: Specify scale: number to draggable. See https://github.com/mzabriskie/react-draggable\nconst Draggable = connect(dragLinkProps)(withDispatch((props) => {\n  const [isDragging, setIsDragging] = useState(false)\n  const [offsetX, setOffsetX] = useState(0)\n  const [offsetY, setOffsetY] = useState(0)\n    /*const [dragX, setDragX] = useState(0)\n  const [dragY, setDragY] = useState(0)\n      onDrag={(e,data) => {\n        setDragX(e.pageX)\n        setDragY(e.pageY)\n      }}*/\n  return (\n    <div id=\"draggableComponentDiv\"\n      onMouseDown={null/*(e) => {e.stopPropagation()}*/}\n      onMouseUp={null/*(e) => {e.stopPropagation()}*/}\n      onMouseMove={null/*(e) => {e.stopPropagation()}*/}\n    >\n    <DraggableCore\n      onStop={(e, data) => {\n        const deltaX = data.x - offsetX;\n        const deltaY = data.y - offsetY;\n        //props.db.update(props.path, {x: props.x+deltaX, y: props.y+deltaY})\n        props.dispatchUpdate(props.path, {x: props.x+deltaX, y: props.y+deltaY})\n        setIsDragging(false)\n      }}\n      handle='.dragHandle'\n      grid={[5,5]}\n      onStart={(e, data) => {\n        setIsDragging(true)\n        setOffsetX(data.x)\n        setOffsetY(data.y)\n      }}\n      disabled={props.disabled}\n    >\n\n      <div className='draggingDiv'>\n        {isDragging ? null\n            /*<div style={{\n              width: 100, \n              height: 100, \n              left: dragX, \n              top: dragY, \n              backgroundColor: 'whitesmoke'}}>\n            </div>*/\n          : props.children\n        }\n        </div>\n      </DraggableCore>\n    </div>\n    );\n}))\n\nexport default Draggable\n","import React, {useState} from 'react'\nimport _ from 'lodash'\nimport { connect } from \"react-redux\"\nimport {DraggableCore} from 'react-draggable'\nimport {withDispatch} from './contexts'\n\nconst dragLinkProps = (state) => ({\n  db: state.db\n})\n\n// TODO: Specify scale: number to draggable. See https://github.com/mzabriskie/react-draggable\nconst Resizable = connect(dragLinkProps)(withDispatch((props) => {\n  const [isDragging, setIsDragging] = useState(false)\n  const [offsetX, setOffsetX] = useState(0)\n  const [offsetY, setOffsetY] = useState(0)\n  return (\n    <DraggableCore\n      onStop={(e, data) => {\n        const deltaX = data.x - offsetX;\n        const deltaY = data.y - offsetY;\n        const deltaH = offsetY - data.y;\n        props.dispatchUpdate(props.path, {\n          width: props.width+deltaX,\n          height: props.height+deltaH,\n          y: props.y+deltaY}\n        )\n        setIsDragging(false)\n      }}\n      handle='.resizeHandle'\n      grid={[5,5]}\n      onStart={(e, data) => {\n        setIsDragging(true)\n        setOffsetX(data.x)\n        setOffsetY(data.y)\n      }}\n      disabled={props.disabled}\n    >\n      <div className='draggingDiv'>\n        { props.children }\n        </div>\n      </DraggableCore>\n    );\n}))\n\nexport default Resizable\n","import React from 'react'\nimport _ from 'lodash'\nimport { connect } from \"react-redux\"\nimport Autocomplete from 'react-autocomplete'\nimport { addPreview } from \"./actions\"\n\nconst mapStateToProps = state => ({\n  defs: state.defs,\n  db: state.db,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addPreview: (db, id) => dispatch(addPreview(db,id)),\n})\n\nclass TableAutocomplete extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {value: ''}\n  }\n  componentDidMount = () => {\n    this.input.focus();\n  }\n  onKeyUp = (e) => {\n    // Enter key confirms the Table\n    if (e.which === 13) {\n      this.props.onSelect(this.state.value)\n    // ESC key cancels\n    } else if (e.which === 27) {\n      this.props.setCancelled()\n    }\n  }\n\n  render = () => {\n    return (\n      <div onKeyUp={this.onKeyUp}>\n          <Autocomplete\n            getItemValue={(item) => item}\n            items={_.values(_.mapValues(this.props.defs,'name'))}\n            renderItem={(item, isHighlighted) => (\n              <div style={{ background: isHighlighted ? 'lightgray' : 'white'}} key={item/*FIXME: key should be id, not name*/}>\n                {item}\n              </div>\n            )}\n            ref={el => this.input = el}\n            open={this.state.value !== ''}\n            shouldItemRender={_.includes}\n            value={this.state.value}\n            onChange={e => this.setState({ value: e.target.value })}\n            onSelect={this.props.onSelect}\n          />\n        </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(TableAutocomplete)\n","import Helper from '../Helper'\nimport uuidv1 from 'uuid/v1'\n\nconst EMPTY_DEF = {layout: [[\"\"]]}\nexport function genDef(defs, theName,theId) {\n  const name = theName || Helper.nextTableName(defs)\n  const id = theId || uuidv1();\n  const idCol = uuidv1();\n  const def = {...EMPTY_DEF, name, cols: {}}\n  def.cols[idCol] = {name: \"A\", id: idCol}\n  def.layout = [[idCol]]\n  return {id, attrs: def}\n}\n","import React, {useState} from 'react'\nimport _ from 'lodash'\nimport { connect } from \"react-redux\"\nimport Selection from './Selection'\nimport uuidv1 from 'uuid/v1'\nimport { deletePath, newTable, set, setDb } from \"./actions\"\nimport * as TABLE from './constants/tables'\nimport * as PATH from './constants/paths'\nimport Table from './Table'\nimport Draggable from './Draggable'\nimport Resizable from './Resizable'\nimport TableAutocomplete from './TableAutocomplete'\nimport {avec, PREVIEWS} from './contexts'\nimport {genDef} from './helpers'\n\n// When the user makes it a selection, it creates a temporaty table.\n// If the user takes the focus away from the text field, delete it\n// If the user writes something, make a table\nclass TemporaryTable extends React.Component {\n  \n  render = () => {\n    return(\n      <div onKeyUp={this.onKeyUp}>\n        <TableAutocomplete onSelect={this.props.setConfirmed} {...this.props} />\n      </div>\n    );\n  }\n}\n\nconst LocatedPreview = (props) => {\n  return (\n    <div style={{\n      position: 'absolute',\n      width: props.width,\n      height: props.height,\n      maxHeight: props.height,\n      left: props.x,\n      top: props.y,\n    }}>\n      { props.children }\n    </div>\n  )\n}\nconst xyToBox = (x0,y0,x1,y1) => {\n  return {x: x0, y: y0, width: x1-x0, height: y1-y0}\n}\nconst selectionIsOutside = (x,y,box) => {\n  return (x < box.x || y < box.y ||\n    x > box.x + box.width ||\n    y > box.y + box.height)\n}\nconst clickIsOutside = (e,box) => {\n  return selectionIsOutside(e.clientX,e.clientY,box)\n}\n\nconst mapStateToProps = state => ({\n  db: state.db,\n  defs: state.defs,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDb: (db, path, val) => dispatch(setDb(db, path,val)),\n  set: (path, val) => dispatch(set(path,val)),\n  deletePath: (db,path) => dispatch(deletePath(db, path)),\n  newTable: (db, defs, name, id) => dispatch(newTable(db, defs, name, id)),\n})\n\nconst OverBar = (props) => {\n  const [over, setOver] = useState(false)\n  return (\n    <div\n      onMouseEnter={() => {setOver(true)}}\n      onMouseLeave={() => {setOver(false)}}\n    >\n      {over ? props.overValue : null}\n      {props.children}\n    </div>\n  );\n}\n\nclass PreviewSelection extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {tempPreview: null, selection: [], selectionToCopy: []}\n  }\n  // If the selection includes at least one preview, select it.\n  // Else, create a new empty preview.\n  onSelect = (x0,x1,y0,y1) => {\n    // If the selection includes at least one preview, select it.\n    const ids = _.keys(this.props.previews).map(k => {\n      const p = this.props.previews[k]\n      const box = xyToBox(x0,y0,x1,y1)\n      const x_c = p.x + p.width/2\n      const y_c = p.y + p.height/2\n      // The preview is selection if the box includes the center of the preview.\n      if (!selectionIsOutside(x_c,y_c,box)) {\n        return k\n      }\n      return null\n    }).filter(e => (e!==null))\n    \n    if (ids && ids.length !== 0) {\n      this.setState({selection: ids})\n    } else {\n  \n      const width = x1-x0\n      const height = y1-y0\n      // Create a new empty preview if it is a real selection (wide enough)\n      if (width > 20 || height > 20) {\n        const id = uuidv1()\n        const tableId = uuidv1()\n        const p = {id, width, height, x: x0, y:y0, tableId}\n        this.setState({selection: [id], tempPreview: p})\n        //\n      }\n    }\n  }\n  onMouseDown = (e) => {\n    if (this.state.tempPreview && clickIsOutside(e,this.state.tempPreview)) {\n      this.setState({selection: [], tempPreview: null})\n    } else if (!this.state.tempPreview && this.state.selection.length > 0) {\n      this.setState({selection: []})\n    }\n  }\n  onKeyUp = (e) => {\n    // Delete key deletes selected previews\n    if (e.which === 46) {\n      this.state.selection.forEach(s => {\n        //this.props.deletePath(this.props.db,[TABLE.PREVIEW,s])\n        this.props.dispatchDelete([TABLE.PREVIEW,s])\n      })\n    }\n  }\n\n    /*canStartSelection = (e) => {\n    let can = true\n    _.values(this.props.previews).map(p => {\n      if (!clickIsOutside(e,p)) {\n        console.log('cannot click because of the preview:')\n        console.log(p)\n        console.log(e)\n\n        can = false\n      }\n    })\n    return can\n  }*/\n\n  onMouseMove = (e) => {\n    this.pageX = e.pageX\n    this.pageY = e.pageY\n  }\n\n  onCopy = (e) => {\n    console.log('onCopy')\n    this.setState({selectionToCopy: this.state.selection})\n  }\n\n  onPaste = (e) => {\n    console.log('onPaste')\n    //console.log(e.clipboardData.getData('Text'));\n    const cpy = this.state.selectionToCopy\n    if (!cpy) { return }\n\n    cpy.map(t => {\n      const p = this.props.previews[t]\n      const x = this.pageX - p.x\n      const y = this.pageY - p.y\n      this.props.db.get([TABLE.TABLES, p.tableId], (model) => {\n        console.log('Copying ' + t)\n        console.log('at ' + this.pageX)\n        const oldDef = this.props.defs[p.tableId]\n        const tableId = uuidv1()\n        const name = tableId\n        //const name = 'copy of ' + oldDef.name // FIXME: number (2)\n        const def = {...oldDef, name}\n        this.props.db.set([TABLE.DEFS,tableId],def)\n        // Duplicate table\n        let path = [TABLE.TABLES, tableId]\n        this.props.setDb(this.props.db, path, model)\n        // Create preview\n        const previewId = uuidv1()\n        path = [TABLE.PREVIEW, previewId]\n        const newP = {id: previewId, width: p.width, height: p.height, x, y, tableId}\n        this.props.setDb(this.props.db, path, newP)\n      })\n      console.log(this)\n    })\n  }\n\n  //  </Selection>\n  //   <Selection onSelect={this.onSelect} onMouseDown={this.onMouseDown}\n  //   canStart={this.canStartSelection}>\n  render = () => {\n    return (\n        <div id=\"screen\" className={this.props.editMode ? \"editMode\" : \"notEditMode\"}\n          style={{width: 1920, height: 10000, outline: 'none'}}\n          onMouseUp={this.onMouseUp}\n          onMouseMove={this.onMouseMove}\n          onKeyUp={this.onKeyUp}\n          tabIndex='0'\n          onPaste={this.onPaste}\n          onCopy={this.onCopy}\n        >\n          { _.keys(this.props.previews).map(k => {\n            const p = this.props.previews[k]\n            const selected = this.state.selection.includes(k)\n            return (\n              <div key={k}>\n                <Draggable\n                  path={[TABLE.PREVIEW, k]}\n                  x={p.x}\n                  y={p.y}\n                  disabled={false}\n                >\n                  <Resizable\n                    path={[TABLE.PREVIEW, k]}\n                    {...p}\n                  disabled={false}\n                >\n                    <LocatedPreview {...p} selected={this.state.selection.includes(k)}>\n                  <div className='popover__wrapper'>\n                      <div className='popover__content'>\n                        <div className='flexHandles'>\n                          <div className='clickHandle'\n                            onClick={() => this.props.set(PATH.ROUTE,`/tables/${p.tableId}`)}\n                          />\n                          <div className='dragHandle'/>\n                          <div className='resizeHandle'/>\n                        </div>\n                      </div>\n                      <div className={selected ? 'selected' : 'notSelected'} style={{\n                      }}>\n                        <Table id={p.tableId} hideColumnNames={true} hideTableName={true} hideLineNumbers={true}/>\n                      </div>\n              </div>\n                </LocatedPreview>\n            </Resizable>\n                    </Draggable>\n            </div>)\n          })}\n          { !this.state.tempPreview ? null :\n          <LocatedPreview {...this.state.tempPreview}>\n            <TemporaryTable\n              setCancelled={() => {this.setState({selection: [], tempPreview: null})}}\n              setConfirmed={(tableName) => {this.setState({selection: [], tempPreview: null});\n                const preview = this.state.tempPreview\n                const path = [TABLE.PREVIEW, this.state.tempPreview.id]\n                const ids = _.keys(this.props.defs).filter(k => (\n                  this.props.defs[k].name === tableName\n                ))\n                if (ids && ids.length === 1) {\n                  preview.tableId = ids[0]\n                } else {\n                  const def = genDef(this.props.defs,null,this.state.tempPreview.tableId)\n                  this.props.dispatch([TABLE.DEFS,def.id],def.attrs)\n                }\n                this.props.dispatch(path, preview);\n              }}\n            />\n          </LocatedPreview>\n          }\n        </div>\n    );\n  }\n}\n\n  /*const load = (LoadObj) => (props) => {\n  return <Loading path={TABLE.PREVIEW}>\n    <LoadObj {...props}/>\n  </Loading>\n}*/\n\nconst connectedPreviewSelection = connect(mapStateToProps,mapDispatchToProps)(avec(PREVIEWS, PreviewSelection))\nexport {connectedPreviewSelection as PreviewSelection }\n","import React, {useState} from 'react'\nimport _ from 'lodash'\nimport { connect } from \"react-redux\"\nimport ScreenMenu from './menus/ScreenMenu'\nimport * as TABLE from './constants/tables'\nimport { MapInteraction } from 'react-map-interaction'\nimport ByPass from './lib/ByPass'\nimport {PreviewSelection} from './Preview'\n\nconst mapStateToProps = state => ({\n  db: state.db,\n  editMode: state.ui.editMode,\n  defs: state.defs,\n})\n\nconst mapDispatchToProps = dispatch => ({\n})\n\n/*\n  This component provides a map like interaction to any content that you place in it. It will let\n  the user zoom and pan the children by scaling and translating props.children using css.\n*/\nconst MapInteractionCSS = (props) => {\n  const [lastX, setLastX] = useState(0);\n  const [lastY, setLastY] = useState(0);\n  const [lastScale, setLastScale] = useState(0);\n  return (\n    <MapInteraction {...props}>\n      {\n        ({ translation, scale }) => {\n          if (!props.disabled) {\n            setLastX(translation.x)\n            setLastY(translation.y)\n            setLastScale(scale)\n          }\n          // Translate first and then scale.  Otherwise, the scale would affect the translation.\n          const transform = `translate(${lastX}px, ${lastY}px) scale(${lastScale})`;\n          return (\n            <div\n              style={{\n                height: '100%',\n                width: '100%',\n                position: 'relative', // for absolutely positioned children\n                overflow: 'hidden',\n                touchAction: 'none', // Not supported in Safari :(\n                msTouchAction: 'none',\n                cursor: 'all-scroll',\n                WebkitUserSelect: 'none',\n                MozUserSelect: 'none',\n                msUserSelect: 'none'\n              }}\n            >\n              <div\n                style={{\n                  transform: transform,\n                  transformOrigin: '0 0 '\n                }}\n              >\n                {props.children}\n              </div>\n            </div>\n          );\n        }\n      }\n    </MapInteraction>\n  );\n};\n\nclass LinkScreen extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {mapDisabled: false, x: 0, y: 0}\n  }\n  \n  render() {\n\n    return (\n      <ByPass if={true || this.props.editMode}>\n        <MapInteractionCSS showControls={true} disabled={this.state.mapDisabled}>\n          <React.Fragment>\n            <PreviewSelection/>\n            <ScreenMenu {...this.props} onPaste={this.onPaste} />\n          </React.Fragment>\n        </MapInteractionCSS>\n      </ByPass>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LinkScreen)\n//export default connect(mapStateToProps, mapDispatchToProps)(LinkScreen)\n","import toRegex from 'path-to-regexp';\nfunction matchURI(path, uri) {\n  const keys = [];\n  const pattern = toRegex(path, keys); // TODO: Use caching\n  const match = pattern.exec(uri);\n  if (!match) return null;\n  const params = Object.create(null);\n  for (let i = 1; i < match.length; i++) {\n    params[keys[i - 1].name] =\n      match[i] !== undefined ? match[i] : undefined;\n  }\n  return params;\n}\nfunction resolve(routes, rawPathname) {\n  const pathname = rawPathname[0] === '#' ? rawPathname.slice(1) : rawPathname\n  console.log(`route: path=${pathname}`)\n  for (const route of routes) {\n    const params = matchURI(route.path, pathname);\n    if (!params) continue;\n    const result = route.action({ ...params,pathname });\n    if (result) return result;\n  }\n\n  const defaultRoute = routes.filter(r => (r.default))[0]\n\n  if (defaultRoute) {\n    console.log('No route matches. Showing default route.')\n    return defaultRoute.action({pathname})\n  } else {\n    const error = new Error('No route matches this location.');\n    error.status = 404;\n    throw error;\n  }\n}\nexport default { resolve };\n","import React from 'react'\nimport _ from 'lodash'\nimport { connect } from \"react-redux\"\nimport Link from './Link'\nimport * as PATH from './constants/paths'\n\nconst mapStateToProps = state => {\n  const loadingObjs = _.get(state.cache.root, PATH.UI_LOADING)\n  return ({\n    loading: _.keys(loadingObjs).reduce((acc,curr) => {\n      return acc || loadingObjs[curr]\n    },false),\n  })\n}\n\nconst mapDispatchToProps = dispatch => ({\n})\n\nclass StatusBar extends React.Component {\n  render = () => {\n    // TODO: No internet connection\n    // TODO: Not logged in, all changes are local\n    // TODO: Saving changes...\n    return (\n      <React.Fragment>\n        <div className='displayFlex' style={{display: `'flex'`}}>\n          <Link to='/'>Home</Link>\n          { this.props.loading\n            ? <span>Loading...</span>\n            : <span>Everything is up to date</span>\n          }\n          <span></span>\n        </div>\n        <hr />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(StatusBar)\n","import React from 'react'\nimport _ from 'lodash'\nimport { connect } from \"react-redux\"\nimport Link from './Link'\nimport Autocomplete from 'react-autocomplete'\nimport { addPreview, set } from \"./actions\"\nimport * as PATH from './constants/paths'\n\nfunction optionsFromDefs(defs) {\n  return _.keys(defs).map(k => (\n    {value: `/tables/${k}`, label: defs[k].name, id: k}\n  ))\n}\n\nfunction ciEquals(a, b) {\n  return typeof a === 'string' && typeof b === 'string'\n    ? a.localeCompare(b, undefined, { sensitivity: 'base'}) === 0\n    : a === b;\n}\n\n// returns whether b is a substring of a\nfunction ciIncludes(a, b) {\n  if (!a) {return false}\n  if (!b) {return true}\n\n  for (let n = a.length - b.length; n >= 0; n--) {\n    if (ciEquals(a.slice(n,n+b.length), b)) {\n      return true\n    }\n  }\n  return false\n}\n\nconst autocompleteMenuStyle = { // FIXME: Maybe useless...\n  borderRadius: '3px',\n  boxShadow: '0 2px 12px rgba(0, 0, 0, 0.1)',\n  background: 'rgba(255, 255, 255, 0)',\n  padding: '2px 0',\n  fontSize: '90%',\n  zIndex: '100',\n  position: 'fixed',\n  overflow: 'auto',\n  maxHeight: '50%', // TODO: don't cheat, let it flow to the bottom\n}\n\nconst mapStateToProps = state => ({\n  defs: state.defs,\n  db: state.db,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addPreview: (db, id) => dispatch(addPreview(db,id)),\n  set: (path, val) => dispatch(set(path,val)),\n})\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {value: ''}\n  }\n  shouldItemRender = (item,str) => {\n    //return _.includes(item.label, str)\n    return ciIncludes(item.label,str)\n  }\n  render = () => {\n    return (\n      <React.Fragment>\n        <div style={{textAlign: 'center'}}>\n          <span>Tables:</span>\n          <Autocomplete\n            getItemValue={(item) => item.label}\n            items={optionsFromDefs(this.props.defs)}\n            renderItem={(item, isHighlighted) => (\n              <div style={{ background: isHighlighted ? 'lightgray' : 'white',\n                            cursor: 'pointer'}}\n                key={item.id}\n              >\n                {item.label}\n              </div>\n            )}\n            shouldItemRender={this.shouldItemRender}\n            value={this.state.value}\n            onChange={e => this.setState({ value: e.target.value })}\n            onSelect={(val, item) => this.props.set(PATH.ROUTE,item.value)}\n            menuStyle={autocompleteMenuStyle}\n          />\n        </div>\n        <hr />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(SearchBar)\n","import React from \"react\"\nimport { connect } from \"react-redux\";\nimport { Menu, Item, Submenu } from 'react-contexify'\nimport { deletePath } from '../actions'\nimport * as TABLE from '../constants/tables'\n\nconst onClickMenu = ({ event, props }) => console.log(event,props);\n\nconst mapStateToProps = state => ({\n  db: state.db,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n});\n\nclass PreviewMenu extends React.Component {\n\n  render() {\n    const {db} = this.props;\n    return(\n      <Menu id=\"previewMenu\">\n        <Item onClick={() => (null)}>delete</Item>\n      </Menu>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PreviewMenu);\n","import React from 'react'\nimport _ from 'lodash'\nimport { connect } from \"react-redux\"\nimport { Fab, Action } from 'react-tiny-fab'\nimport 'react-tiny-fab/dist/styles.min.css'\n// List of icons here: https://react-icons.netlify.com/#/icons/md\nimport Popup from \"reactjs-popup\"\nimport TableAutocomplete from './TableAutocomplete'\nimport * as TABLE from './constants/tables'\n\nimport {\n  MdAdd,\n  MdSettings,\n  MdHistory,\n  MdMoreHoriz,\n  MdPublish,\n} from 'react-icons/md';\nimport { newTable, set, setDb } from \"./actions\"\nimport uuidv1 from 'uuid/v1'\nimport * as PATH from './constants/paths'\n\nconst position = {\n      bottom: 0,\n      right: 0,\n    }\nconst event  = 'click'\n\nconst mainButtonStyles = {\n      backgroundColor: '#e74c3c',\n    }\nconst actionButtonStyles = {\n      backgroundColor: '#ffffff',\n      color: '#34495e',\n}\n\nconst mapStateToProps = state => ({\n  db: state.db,\n  defs: state.defs,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  newTable: (db,defs,name,id,callback) => dispatch(newTable(db,defs,name,id,callback)),\n  set: (path, val) => dispatch(set(path,val)),\n  setDb: (db, path, val) => dispatch(setDb(db, path,val)),\n})\n\nconst POPUP = {\n  PUBLISH: 'publish',\n  NEW: 'new',\n  SETTINGS: 'settings',\n  HISTORY: 'history',\n}\n\nclass MyFAB extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {popup: ''}\n  }\n  render() {\n    return (\n      <div>\n        <Popup open={this.state.popup === POPUP.PUBLISH} modal\n          closeOnDocumentClick\n          onClose={() => this.setState({popup: ''})}\n        >\n          <div className='modal'>\n            <div className=\"header\">Publish</div>\n            <div className='content'>\n              Publish as html. Publish as pdf.\n            </div>\n          </div>\n        </Popup>\n        <Popup open={this.state.popup === POPUP.NEW} modal\n          closeOnDocumentClick\n          onClose={() => this.setState({popup: ''})}\n        >\n          <div className='modal'>\n            <div className=\"header\">New table</div>\n            <div className='content'>\n              New empty table or create from template.<br />\n              Recent templates:<br />\n              All templates available:<br />\n              <TableAutocomplete onSelect={(tableName) => {\n                //const id = uuidv1()\n                //this.props.newTable(this.props.db,this.props.defs, null, id, (vals) => {\n                //  this.props.set(PATH.ROUTE,`/tables/${id}`)\n                //})\n                const ids = _.keys(this.props.defs).filter(k => (\n                  this.props.defs[k].name === tableName\n                ))\n                if (ids && ids.length === 1) {\n                  this.props.db.get([TABLE.TABLES,ids[0]],(data) => {\n                    const id = uuidv1()\n                    this.props.newTable(this.props.db,this.props.defs, null, id, (vals) => {\n                      this.props.setDb(this.props.db, [TABLE.TABLES,id],data)\n                      this.props.set(PATH.ROUTE,`/tables/${id}`)\n                    })\n                  })\n                }\n              }}/>\n            </div>\n          </div>\n        </Popup>\n        <Popup open={this.state.popup === POPUP.SETTINGS} modal\n          closeOnDocumentClick\n          onClose={() => this.setState({popup: ''})}\n        >\n          <div className='modal'>\n            <div className=\"header\">Settings</div>\n            <div className='content'>\n              There are currently no settings available.\n            </div>\n          </div>\n        </Popup>\n        <Popup open={this.state.popup === POPUP.HISTORY} modal\n          closeOnDocumentClick\n          onClose={() => this.setState({popup: ''})}\n        >\n          <div className='modal'>\n            <div className=\"header\">History</div>\n            <div className='content'>\n              The list of recent tables:\n            </div>\n          </div>\n        </Popup>\n      <Fab\n        mainButtonStyles={mainButtonStyles}\n        position={position}\n        icon={<MdMoreHoriz />}\n        event={event}\n      >\n        <Action\n          style={actionButtonStyles}\n          text=\"Edit settings\"\n          onClick={e => {\n            this.setState({popup: POPUP.SETTINGS})\n          }}\n        >\n          <MdSettings />\n        </Action>\n        <Action\n          style={actionButtonStyles}\n          text=\"Recent tables\"\n          onClick={e => {\n            this.setState({popup: POPUP.HISTORY})\n          }}\n        >\n          <MdHistory />\n        </Action>\n        <Action\n          style={actionButtonStyles}\n          text=\"Publish\"\n          onClick={e => {\n            this.setState({popup: POPUP.PUBLISH})\n          }}\n        >\n          <MdPublish />\n        </Action>\n        <Action\n          style={actionButtonStyles}\n          text=\"New table\"\n          onClick={e => {\n            \n            this.setState({popup: POPUP.NEW})\n          }}\n        >\n          <MdAdd />\n        </Action>\n      </Fab>\n    </div>\n    )\n  }\n}\n\n    /*export const renderFAB = c =>\n  <Fab\n    mainButtonStyles={mainButtonStyles}\n    position={position}\n    icon={<MdMoreHoriz />}\n    event={event}\n  >\n    <Action\n      style={actionButtonStyles}\n      text=\"Email\"\n      onClick={e => {\n        alert('I printed the event to the console.');\n        console.log(e);\n      }}\n    >\n      <MdEmail />\n    </Action>\n    <Action\n      style={actionButtonStyles}\n      text=\"Notifications\"\n      onClick={() => alert('Here is your notification.')}\n    >\n      <MdNotifications />\n    </Action>\n    <Action style={actionButtonStyles} text=\"Fullscreen\" onClick={() => alert('What?')}>\n      <MdPages />\n    </Action>\n    <Action style={actionButtonStyles} text=\"Search\" onClick={() => alert('No search...')}>\n      <MdSearch />\n    </Action>\n    <Action style={actionButtonStyles} text=\"Editor\" onClick={e => console.log(e)}>\n      <MdCode />\n    </Action>\n    <Action\n      style={actionButtonStyles}\n      text=\"Like it!\"\n      onClick={() => alert('This is fantastic!')}\n    >\n      <MdFavorite />\n    </Action>\n  </Fab>*/\n\nexport default connect(mapStateToProps,mapDispatchToProps)(MyFAB)\n","import React from 'react'\nimport _ from 'lodash'\nimport {MOUSE_ACTION,MOUSE_ACTION_DRAG,withDispatch} from './contexts'\n\nimport {\n  MdDragHandle,\n  MdPhotoSizeSelectSmall,\n} from 'react-icons/md';\n\nfunction tooltipButton(draw, callback) {\n  return <span className=\"tooltipButton\" onClick={callback}>{draw}</span>\n}\n\nconst RightTooltip = withDispatch((props) => {\n  \n  function enableDrag() {\n    props.cache(MOUSE_ACTION, MOUSE_ACTION_DRAG)\n  }\n\n  return (\n    <div style={{float:'right', width: '26px'}}>\n      <div className='rightTooltip'>\n      <div className='appRow'>\n        {tooltipButton(<MdDragHandle/>,enableDrag)}\n        {tooltipButton(<MdPhotoSizeSelectSmall/>,() => {return null})}\n      </div>\n      </div>\n    </div>\n  )\n})\n\n// avec(SELECTION,\n  /*const Tooltip = withDispatch((props) => {\n\n  \n\n  //const tableRow = [] ....\n  return (\n    <div style={{\n      zIndex: '1000',\n      borderStyle: 'solid',\n      borderWidth: '2px',\n      borderColor: 'black',\n      backgroundColor: '#C0C0C0',\n      position: 'absolute',\n      left: props.x + 20,\n      top: props.y - 20,}}\n    >\n      <div className='appRow'>\n        {tooltipButton(<MdDragHandle/>,enableDrag)}\n        {tooltipButton(<MdClose/>,() => {return null})}\n      </div>\n      <div className='prewviewRow'> <MdViewColumn/>4Arrow Selection name<MdAdd/><MdHistory/></div>\n    </div>\n  )\n})*/\n\nexport default RightTooltip\n","import React from 'react'\nimport { connect } from \"react-redux\"\nimport _ from 'lodash'\n\nimport 'react-contexify/dist/ReactContexify.min.css'\nimport './styles/react-grid-layout-style.css'\nimport 'react-resizable/css/styles.css'\n\nimport ColumnMenu from './Table/ColumnMenu'\nimport TableMenu from './Table/TableMenu'\nimport * as TABLE from './constants/tables'\nimport { defsLoaded } from './actions'\nimport Table from './Table'\nimport Screen from './Screen'\nimport router from './router'\nimport StatusBar from './StatusBar'\nimport SearchBar from './SearchBar'\nimport PreviewMenu from './menus/PreviewMenu'\nimport * as PATH from './constants/paths'\nimport FAB from './FAB'\nimport Tooltip from './Tooltip'\n\nconst mapStateToProps = state => ({\n  db: state.db,\n  route: _.get(state.cache.root, PATH.ROUTE),\n  history: state.history,\n})\n\nconst mapDistpatchToProps = dispatch => ({\n  defsLoaded: defs => dispatch(defsLoaded(defs))\n})\n\nconst routes = [\n  {path: '/index.html', action: () => (<Screen />), default: true},\n  {path: '/', action: () => (<Screen />)},\n  {path: '/tables/:id', action: (props) => (<Table {...props} />)},\n]\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.props.db.get(TABLE.DEFS, this.props.defsLoaded)\n  }\n  \n  render() {\n    if (this.props.route) {\n      this.props.history.push({\n        hash: this.props.route,\n      })\n    }\n    return (\n      <div className=\"app\">\n        <div className=\"taskbars\">\n          <StatusBar/>\n          <SearchBar/>\n        </div>\n        {router.resolve(routes, this.props.route || this.props.history.location.hash)}\n        <PreviewMenu />\n        <FAB/>\n        <Tooltip/>\n        <TableMenu db={this.props.db} />\n        <ColumnMenu db={this.props.db} />\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDistpatchToProps)(App);\n","import React from 'react'\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n    console.error(error,info)\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as ACTION from \"../constants/action-types\";\n//import { combineReducers } from 'redux'\nimport { createBrowserHistory } from 'history'\n//import Firebase from '../Firebase'\nimport SimpleDb from '../SimpleDb'\nimport { Map } from 'immutable';\nimport _ from 'lodash'\n\nconst uiInitialState = {\n  editMode: false,\n};\n\nfunction ui(state = uiInitialState, action) {\n  if (action.type === ACTION.TOGGLE_EDIT_MODE) {\n    return Object.assign({}, state, {editMode:!state.editMode})\n  }\n  return state;\n}\n\n// The cache is the local version of the db.\n// It is a generic way of accessing models.\nfunction cache(state = {root: {}}, action) {\n  if (action.type === ACTION.CACHE.SET) {\n    console.log(`Cache: Set: path:${action.path}`);\n    const path = action.path.constructor === Array ? action.path : [action.path]\n    return Map(state).setIn(path, action.val).toJS()\n\n  } else if (action.type === ACTION.CACHE.PUSH) {\n  } else if (action.type === ACTION.CACHE.NEW) {\n  } else if (action.type === ACTION.CACHE.LIST) {\n  } else if (action.type === ACTION.CACHE.DEL) {\n  }\n  return state;\n}\n\nfunction addIds(obj) {\n  return _.keys(obj).reduce((acc,k) => {\n    const v = obj[k];\n    v.id = k;\n    acc[k] = v;\n    return acc;\n  },{})\n}\n\nfunction defs(state = {}, action) {\n  if (action.type === ACTION.DEFS_LOADED) {\n    const defs = addIds(action.payload)\n    return _.keys(action.payload).reduce((acc,k) => {\n      if (defs[k].del) {return acc;} // If the def is marked as delete dont return it.\n      acc[k] = {...defs[k], cols: addIds(defs[k].cols)}\n      return acc;\n    }, {})\n\n  } else if (action.type === ACTION.DELETE_TABLE) {\n    return Object.keys(state)\n        .filter(k => k !== action.id)\n        .reduce((acc, k) => {\n          return {\n            ...acc,\n            [k]: state[k]\n          };\n        }, {});\n\n  } else if (action.type === ACTION.UPDATE_DEFS) {\n    return action.defs\n\n  } else if (action.type === ACTION.UPDATE_DEF) {\n    const defs = {...state}\n    defs[action.def.name] = action.def\n    return defs\n\n  } else if (action.type === ACTION.DELETE_COLUMN) {\n  } else if (action.type === ACTION.NEW_TABLE) {\n    const d = {...state}\n    d[action.name] = action.def;\n    return d\n  }\n  return state;\n}\n\nexport default function combination(state, action) {\n  if (state === undefined) {\n    state = {\n      db: new SimpleDb(),\n      //db: new Firebase(),\n      history: createBrowserHistory(),\n    };\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n      window.db = state.db;\n    }\n  }\n  const vals = {\n    ...state,\n    //...combineReducers({ //WHY THE FUCK THIS DOESNT WORK!!!!!!\n    ui: ui(state.ui, action),\n    defs: defs(state.defs, action),\n    cache: cache(state.cache, action),\n  }\n  return vals;\n}\n\n//export default rootReducer;\n","import { createStore } from \"redux\";\nimport appReducer from \"../reducers/index\";\n\nconst store = createStore(appReducer);\n\nexport default store;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/index.css'\nimport App from './App'\nimport ErrorBoundary from './ErrorBoundary'\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store\"\nimport ByPass from './lib/ByPass'\n\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { DragDropContextProvider } from 'react-dnd'\nimport {Store, StoreProvider} from './contexts'\nimport MouseController from './MouseController'\n\nconst theStore = new Store({test: '1212'})\n\n//import KeyController from './KeyController'\n//<KeyController>\n//</KeyController>\n//<MouseController>\n//</MouseController>\nReactDOM.render(\n  <StoreProvider store={theStore}>\n  <Provider store={store}>\n    <DragDropContextProvider backend={HTML5Backend}>\n        <ByPass if={process.env.NODE_ENV === 'development'}>\n          <ErrorBoundary>\n            <App />\n          </ErrorBoundary>\n        </ByPass>\n    </DragDropContextProvider>\n  </Provider>\n  </StoreProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react'\nimport _ from 'lodash'\nimport {withDispatch} from './contexts'\nimport Tooltip from './Tooltip'\n\nclass MouseController extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {menuOpened: false}\n  }\n  \n  render = () => {\n    // TODO: Only open menu when it selects something\n    return (\n      <div onMouseUp={(e) => {\n        this.setState({menuOpened: true, x: e.pageX, y: e.pageY})\n        console.log('onMouseUp correct')\n      }}>\n        {this.state.menuOpened ? <Tooltip x={this.state.x} y={this.state.y}/> : null}\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default withDispatch(MouseController)\n\n\n\n\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*\nreadOnly    Bool    false   Cell will never go in edit mode\nkey String  undefined   By default, each cell is given the key of col number and row number. This would override that key\nclassName   String  undefined   Additional class names for cells.\ncomponent   ReactElement    undefined   Insert a react element or JSX to this field. This will render on edit mode\nforceComponent  bool    false   Renders what's in component at all times, even when not in edit mode\ndisableEvents   bool    false   Makes cell unselectable and read only\ncolSpan number  1   The colSpan of the cell's td element\nrowSpan number  1   The rowSpan of the cell's td element\nwidth   number or String    undefined   Sets the cell's td width using a style attribute. Number is interpreted as pixels, strings are used as-is. Note: This will only work if the table does not have a set width.\noverflow    'wrap'|'nowrap'| 'clip' undefined   How to render overflow text. Overrides grid-level overflow option.\neditor func  undefined A component used to render the cell's value when being edited\nviewer func  undefined A component used to render the cell's value when not being edited\n*/\n\n\nvar CellShape = {\n  readOnly: _propTypes2.default.bool,\n  key: _propTypes2.default.string,\n  className: _propTypes2.default.string,\n  component: _propTypes2.default.oneOfType([_propTypes2.default.element, _propTypes2.default.func]),\n  forceComponent: _propTypes2.default.bool,\n  disableEvents: _propTypes2.default.bool,\n  colSpan: _propTypes2.default.number,\n  rowSpan: _propTypes2.default.number,\n  width: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  overflow: _propTypes2.default.oneOf(['wrap', 'nowrap', 'clip']),\n  dataEditor: _propTypes2.default.func,\n  valueViewer: _propTypes2.default.func\n};\nexports.default = CellShape;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _CellShape = require('./CellShape');\n\nvar _CellShape2 = _interopRequireDefault(_CellShape);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Cell = function (_PureComponent) {\n  _inherits(Cell, _PureComponent);\n\n  function Cell() {\n    _classCallCheck(this, Cell);\n\n    return _possibleConstructorReturn(this, (Cell.__proto__ || Object.getPrototypeOf(Cell)).apply(this, arguments));\n  }\n\n  _createClass(Cell, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          cell = _props.cell,\n          row = _props.row,\n          col = _props.col,\n          attributesRenderer = _props.attributesRenderer,\n          className = _props.className,\n          style = _props.style,\n          onMouseDown = _props.onMouseDown,\n          onMouseOver = _props.onMouseOver,\n          onDoubleClick = _props.onDoubleClick,\n          onContextMenu = _props.onContextMenu;\n      var colSpan = cell.colSpan,\n          rowSpan = cell.rowSpan;\n      var attributes = attributesRenderer ? attributesRenderer(cell, row, col) : {};\n      return _react2.default.createElement('td', _extends({\n        className: className,\n        onMouseDown: onMouseDown,\n        onMouseOver: onMouseOver,\n        onDoubleClick: onDoubleClick,\n        onContextMenu: onContextMenu,\n        colSpan: colSpan,\n        rowSpan: rowSpan,\n        style: style\n      }, attributes), this.props.children);\n    }\n  }]);\n\n  return Cell;\n}(_react.PureComponent);\n\nexports.default = Cell;\nCell.propTypes = {\n  row: _propTypes2.default.number.isRequired,\n  col: _propTypes2.default.number.isRequired,\n  cell: _propTypes2.default.shape(_CellShape2.default).isRequired,\n  selected: _propTypes2.default.bool,\n  editing: _propTypes2.default.bool,\n  updated: _propTypes2.default.bool,\n  attributesRenderer: _propTypes2.default.func,\n  onMouseDown: _propTypes2.default.func.isRequired,\n  onMouseOver: _propTypes2.default.func.isRequired,\n  onDoubleClick: _propTypes2.default.func.isRequired,\n  onContextMenu: _propTypes2.default.func.isRequired,\n  className: _propTypes2.default.string,\n  style: _propTypes2.default.object\n};\nCell.defaultProps = {\n  selected: false,\n  editing: false,\n  updated: false,\n  attributesRenderer: function attributesRenderer() {}\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _CellShape = require('./CellShape');\n\nvar _CellShape2 = _interopRequireDefault(_CellShape);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DataEditor = function (_PureComponent) {\n  _inherits(DataEditor, _PureComponent);\n\n  function DataEditor(props) {\n    _classCallCheck(this, DataEditor);\n\n    var _this = _possibleConstructorReturn(this, (DataEditor.__proto__ || Object.getPrototypeOf(DataEditor)).call(this, props));\n\n    _this.handleChange = _this.handleChange.bind(_this);\n    return _this;\n  }\n\n  _createClass(DataEditor, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this._input.focus();\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(e) {\n      this.props.onChange(e.target.value);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          value = _props.value,\n          onKeyDown = _props.onKeyDown;\n      return _react2.default.createElement('input', {\n        ref: function ref(input) {\n          _this2._input = input;\n        },\n        className: 'data-editor',\n        value: value,\n        onChange: this.handleChange,\n        onKeyDown: onKeyDown\n      });\n    }\n  }]);\n\n  return DataEditor;\n}(_react.PureComponent);\n\nexports.default = DataEditor;\nDataEditor.propTypes = {\n  value: _propTypes2.default.node.isRequired,\n  row: _propTypes2.default.number.isRequired,\n  col: _propTypes2.default.number.isRequired,\n  cell: _propTypes2.default.shape(_CellShape2.default),\n  onChange: _propTypes2.default.func.isRequired,\n  onCommit: _propTypes2.default.func.isRequired,\n  onRevert: _propTypes2.default.func.isRequired,\n  onKeyDown: _propTypes2.default.func.isRequired\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _CellShape = require('./CellShape');\n\nvar _CellShape2 = _interopRequireDefault(_CellShape);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ValueViewer = function (_PureComponent) {\n  _inherits(ValueViewer, _PureComponent);\n\n  function ValueViewer() {\n    _classCallCheck(this, ValueViewer);\n\n    return _possibleConstructorReturn(this, (ValueViewer.__proto__ || Object.getPrototypeOf(ValueViewer)).apply(this, arguments));\n  }\n\n  _createClass(ValueViewer, [{\n    key: 'render',\n    value: function render() {\n      var value = this.props.value;\n      return _react2.default.createElement('span', {\n        className: 'value-viewer'\n      }, value);\n    }\n  }]);\n\n  return ValueViewer;\n}(_react.PureComponent);\n\nexports.default = ValueViewer;\nValueViewer.propTypes = {\n  row: _propTypes2.default.number.isRequired,\n  col: _propTypes2.default.number.isRequired,\n  cell: _propTypes2.default.shape(_CellShape2.default),\n  value: _propTypes2.default.node.isRequired\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Sheet = function (_PureComponent) {\n  _inherits(Sheet, _PureComponent);\n\n  function Sheet() {\n    _classCallCheck(this, Sheet);\n\n    return _possibleConstructorReturn(this, (Sheet.__proto__ || Object.getPrototypeOf(Sheet)).apply(this, arguments));\n  }\n\n  _createClass(Sheet, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('table', {\n        className: this.props.className\n      }, _react2.default.createElement('tbody', null, this.props.children));\n    }\n  }]);\n\n  return Sheet;\n}(_react.PureComponent);\n\nSheet.propTypes = {\n  className: _propTypes2.default.string,\n  data: _propTypes2.default.array.isRequired\n};\nexports.default = Sheet;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _CellShape = require('./CellShape');\n\nvar _CellShape2 = _interopRequireDefault(_CellShape);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Row = function (_PureComponent) {\n  _inherits(Row, _PureComponent);\n\n  function Row() {\n    _classCallCheck(this, Row);\n\n    return _possibleConstructorReturn(this, (Row.__proto__ || Object.getPrototypeOf(Row)).apply(this, arguments));\n  }\n\n  _createClass(Row, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('tr', null, this.props.children);\n    }\n  }]);\n\n  return Row;\n}(_react.PureComponent);\n\nRow.propTypes = {\n  row: _propTypes2.default.number.isRequired,\n  cells: _propTypes2.default.arrayOf(_propTypes2.default.shape(_CellShape2.default)).isRequired\n};\nexports.default = Row;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar TAB_KEY = exports.TAB_KEY = 9;\nvar ENTER_KEY = exports.ENTER_KEY = 13;\nvar ESCAPE_KEY = exports.ESCAPE_KEY = 27;\nvar LEFT_KEY = exports.LEFT_KEY = 37;\nvar UP_KEY = exports.UP_KEY = 38;\nvar RIGHT_KEY = exports.RIGHT_KEY = 39;\nvar DOWN_KEY = exports.DOWN_KEY = 40;\nvar DELETE_KEY = exports.DELETE_KEY = 46;\nvar BACKSPACE_KEY = exports.BACKSPACE_KEY = 8;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderValue = renderValue;\nexports.renderData = renderData;\n\nfunction renderValue(cell, row, col, valueRenderer) {\n  var value = valueRenderer(cell, row, col);\n  return value === null || typeof value === 'undefined' ? '' : value;\n}\n\nfunction renderData(cell, row, col, valueRenderer, dataRenderer) {\n  var value = dataRenderer ? dataRenderer(cell, row, col) : null;\n  return value === null || typeof value === 'undefined' ? renderValue(cell, row, col, valueRenderer) : value;\n}"],"sourceRoot":""}